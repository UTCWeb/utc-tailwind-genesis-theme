<?php
/**
 * UTC Tailwind Genesis.
 *
 * Based off of the Navigation Pro child theme. This file adds functions to the UTC Tailwind Genesis theme.
 *
 * @package UTC Tailwind Genesis
 * @author  Bridget Hornsby
 * @license GPL-2.0-or-later
 * @link    https://github.com/UTCWeb/utc-tailwind-genesis-theme
 */

// Start the engine.
require_once get_template_directory() . '/lib/init.php';

//Set localization (do not remove).
add_action( 'after_setup_theme', 'utc_localization_setup' );
function utc_localization_setup() {
    load_child_theme_textdomain( 'utc', get_stylesheet_directory() . '/languages' );
}

// Adds the theme helper functions.
require_once get_stylesheet_directory() . '/lib/helper-functions.php';

// Adds theme markup functions.
require_once get_stylesheet_directory() . '/lib/markup.php';

// Adds Image upload and Color select to WordPress Theme Customizer.
require_once get_stylesheet_directory() . '/lib/customizer/customize.php';

// Includes Customizer CSS.
require_once get_stylesheet_directory() . '/lib/customizer/output.php';

// Adds the title helper functions.
require_once get_stylesheet_directory() . '/lib/title-functions.php';

// Adds the image helper functions.
require_once get_stylesheet_directory() . '/lib/image-functions.php';


//add_filter( 'show_admin_bar', '__return_true' );
//Add  theme supports.
add_action( 'after_setup_theme', 'utc_theme_support', 1 );
function utc_theme_support() {

    $theme_supports = genesis_get_config( 'theme-supports' );

    foreach ( $theme_supports as $feature => $args ) {
        add_theme_support( $feature, $args );
    }

}

//Add Gutenber opt-in features and styling
add_action( 'after_setup_theme', 'genesis_child_gutenberg_support' );
function genesis_child_gutenberg_support() { // phpcs:ignore WordPress.NamingConventions.PrefixAllGlobals.NonPrefixedFunctionFound -- using same in all child themes to allow action to be unhooked.
    require_once get_stylesheet_directory() . '/lib/gutenberg/init.php';
}

// Register the responsive menu.
if ( function_exists( 'genesis_register_responsive_menus' ) ) {
    genesis_register_responsive_menus( genesis_get_config( 'responsive-menus' ) );
}

// Remove default Genesis Child Theme Stylesheet bc it's a duplicate of the compiled css
remove_action( 'genesis_meta', 'genesis_load_stylesheet' );

// Enqueue script files
add_action( 'wp_enqueue_scripts', 'utc_enqueue_scripts_styles' );
function utc_enqueue_scripts_styles() {

    $appearance = genesis_get_config( 'appearance' );

    wp_enqueue_style(
        genesis_get_theme_handle() . '-fonts',
        $appearance['fonts-url'],
        [],
        genesis_get_theme_version()
    );

    wp_enqueue_style(
        genesis_get_theme_handle() . '-icons',
        $appearance['icons-url'],
        [],
        genesis_get_theme_version()
    );

    if ( genesis_is_amp() ) {

        wp_enqueue_style(
            genesis_get_theme_handle() . '-amp',
            get_stylesheet_directory_uri() . '/lib/amp/amp.css',
            [ genesis_get_theme_handle() ],
            genesis_get_theme_version()
        );

        return; // Load no further scripts and styles on AMP pages.

    }

    wp_enqueue_script(
        genesis_get_theme_handle() . '-global-script',
        get_stylesheet_directory_uri() . '/js/global.js',
        [ 'jquery' ],
        genesis_get_theme_version(),
        true
    );


    wp_enqueue_script( 
		'fontawesome-kit', 
		'https://kit.fontawesome.com/6cef20ef42.js', 
		false 
	);

    wp_enqueue_style( 
		'google-roboto', 
		'https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap', 
		false 
	);

	wp_enqueue_style( 
		'google-oswald', 
		'https://fonts.googleapis.com/css2?family=Oswald:wght@200;300;400;500;600;700&display=swap', 
		false 
	);

	wp_enqueue_style(
		genesis_get_theme_handle() . '-compiled', 
		get_stylesheet_directory_uri() . '/dist/style.css',
		[],
		genesis_get_theme_version()
	);
	
    wp_enqueue_script( 
		genesis_get_theme_handle() . '-compiled', 
		get_stylesheet_directory_uri() . '/dist/app.js', 
		[ 'jquery' ],
		genesis_get_theme_version(), 
		true 
	);
}

/* Set content width for Gallery Mosaic */
if ( ! isset( $content_width ) )
$content_width = 880;

// Add image sizes.
add_image_size( 'teaser', 75, 75, true );
add_image_size( 'thumbnail', 150, 150, true );
add_image_size( 'medium', 300, 300, true );
add_image_size( 'featured-blog', 475, 400, true );
add_image_size( 'genesis-singular-images', 780, 400, true );
add_image_size( 'singular-full-width', 1280, 660, true );
add_image_size( 'newsletter-large', 580, 9999 ); //580 pixels wide (and unlimited height) for newsletter header image
add_image_size( 'medium-large', 610, 9999 ); //610 pixels wide (and unlimited height) for newsletter header image
add_image_size( 'large-thumbnail', 600, 600, true ); //600 pixels wide & tall for newsletter retina/thumb images

//Add featured-blog image size to Media Library.
add_filter( 'image_size_names_choose', 'utc_media_library_sizes' );
function utc_media_library_sizes( $sizes ) {

    $sizes['teaser']           = __( 'Teaser - 75px by 75px', 'utc' );
    $sizes['thumbnail']           = __( 'Thumbnail - 150px by 150px', 'utc' );
	$sizes['medium']           = __( 'Thumbnail - 300px by 300px', 'utc' );
    $sizes['featured-blog']           = __( 'Featured Blog - 475px by 400px', 'utc' );
    $sizes['genesis-singular-images'] = __( 'Singular - 780px by 400px', 'utc' );
    $sizes['singular-full-width']     = __( 'Singular Full - 1280px by 660px', 'utc' );
	$sizes['newsletter-large']     = __( 'Large 580px wide', 'utc' );
	$sizes['medium-large']     = __( 'Medium Large - 610px wide', 'utc' );
	$sizes['large-thumbnail']     = __( 'Large Thumbnail - 600px by 600px', 'utc' );

    return $sizes;
}

/** Adding custom Favicon */
add_filter( 'genesis_pre_load_favicon', 'custom_favicon' ); 
function custom_favicon( $favicon_url ) {
	$favicon_powerc = get_stylesheet_directory() . '/image/power-c.png';
	return $favicon_powerc;
}

//* Re-position Post Info Conditionally
function conditional_reposition() {
	if ( is_front_page() || is_archive() ) {
		remove_action( 'genesis_entry_footer', 'genesis_post_meta' );
		remove_action( 'genesis_entry_header', 'genesis_post_info', 1 );
		remove_action( 'genesis_before_entry', 'genesis_post_info', 1 );
 	}
}
add_action( 'genesis_entry_header', 'conditional_reposition' );

//Display Featured Image with Caption on top of the post 
// @link https://sridharkatakam.com/add-featured-images-entry-single-posts-genesis/
/*NOT BACKWARDS COMPATITBLE*
function featured_post_image() {
  	if ( ! is_singular( 'post' ) )  {
  		return;
	}
	$image = genesis_get_image( 'format=url&size=post-image' ); // get the URL of featured image.

	$thumb_id = get_post_thumbnail_id( get_the_ID() );     // get the alt text of featured image.
	$alt = get_post_meta( $thumb_id, '_wp_attachment_image_alt', true );

	$caption = get_post( $thumb_id )->post_excerpt; // get the caption of featured image.
	$caption_html = $caption ? '<figcaption>'. $caption . '</figcaption>' : ''; // Construct the caption HTML if caption is present for the featured image..
		
	printf( '<figure class="single-post-image wp-caption"><img src="%s" alt="%s" />%s</figure>', esc_url( $image ), $alt, $caption_html ); // display the featured image with caption (if present) beneath the image.
}
add_action( 'genesis_before_entry', 'featured_post_image', 8 );
*/

// Remove header right widget area.
unregister_sidebar( 'header-right' );

// Remove secondary sidebar.
unregister_sidebar( 'sidebar-alt' );

// Remove site layouts.
genesis_unregister_layout( 'content-sidebar-sidebar' );
genesis_unregister_layout( 'sidebar-content-sidebar' );
genesis_unregister_layout( 'sidebar-sidebar-content' );


// Reposition primary navigation menu.
remove_action( 'genesis_after_header', 'genesis_do_nav' );
add_action( 'genesis_header', 'genesis_do_nav', 12 );

remove_action( 'genesis_header', 'genesis_do_header' );
add_action( 'genesis_header', 'genesis_do_utcheader' );

// Reposition secondary navigation menu.
remove_action( 'genesis_after_header', 'genesis_do_subnav' );
add_action( 'genesis_header_right', 'genesis_do_subnav', 9 );

remove_action( 'genesis_site_title', 'genesis_seo_site_title' );
add_action( 'genesis_header', 'custom_site_title', 12 );

// Reposition the site title.
function custom_site_title() { 
	$site_title = get_bloginfo( 'name' );
	$link = sprintf( '<a href="%1$s" rel="blog home">%2$s</a>', get_bloginfo( 'url' ), $site_title );
	echo '<div class="custom-title">' . $link . '</div>';
}

add_action( 'genesis_before_content', 'archive_site_title' );
// Reposition the site title.
function archive_site_title() { 
	if (is_front_page()){
		$site_title = get_bloginfo( 'name' );
		echo '<h1 id="site-name-title" style="margin-top:0;width:100%">' . $site_title . '</h1>';
	}
}


//Create custom header markup.
function genesis_do_utcheader() {

    global $wp_registered_sidebars;

    genesis_markup(
        [
            'open'    => '<div class="header-first-row"><div %s><a href="https://www.utc.edu" class="logo-link" rel="home"><svg width="320px" height="47px" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
            viewBox="0 0 350 50" style="enable-background:new 0 0 320 47;" xml:space="preserve">
       <style type="text/css">
           .st0{fill:#112E51;}
           .st1{fill:#FFFFFF;}
           .st2{fill:#FDB736;}
       </style>
       <title>Go to www.utc.edu</title>
       <g>
			<path class="st0" d="M60.5,12.2c0.1,1.3,0.1,1.5,0.4,2c0.3,0.5,0.8,0.7,1.5,0.7c0.3,0,0.3,0.1,0.3,0.3c0,0.2-0.1,0.2-0.3,0.2
				c-0.1,0-0.1,0-0.8-0.1c-1.1-0.1-1.1-0.1-1.4-0.1c-0.4,0-0.5,0-1.6,0.1l-1.1,0.1c-0.2,0-0.3,0.1-0.5,0.1c-0.2,0-0.2-0.1-0.2-0.2
				c0-0.3,0.1-0.3,0.4-0.3c1-0.2,1.5-0.7,1.4-2V5.5c0-0.7-0.1-0.9-0.8-0.9c-1.2,0-1.9,0.1-2.3,0.3s-0.5,0.5-0.7,1.5
				C54.6,6.9,54.5,7,54.3,7s-0.3-0.1-0.3-0.3c0-0.1,0-0.1,0.1-0.4c0.1-0.2,0.1-0.2,0.1-1c0.1-0.3,0.1-0.5,0.1-0.7
				c0.1-0.2,0.1-0.3,0.1-0.5c0-0.3,0.1-0.3,0.3-0.3c0.1,0,0.2,0,0.3,0c0.2,0,0.5,0,1,0.1h1.7c1.6,0,1.6,0,2.1,0c1,0,3.2-0.1,4.1-0.1
				h0.6c0.4,0,0.4,0,0.5,1c0.1,0.4,0.1,0.6,0.1,0.7c0.1,0.2,0.1,0.6,0.1,0.7c0,0.2-0.1,0.3-0.2,0.3c-0.2,0-0.2-0.1-0.3-0.3
				c-0.1-0.5-0.4-1-0.7-1.2c-0.3-0.2-0.7-0.3-1.5-0.3c-1.6,0-1.9,0.2-1.9,1.2L60.5,12.2L60.5,12.2z"/>
			<path class="st0" d="M70.9,9.6c-0.8,0-0.9,0.2-0.9,1v2.1c-0.1,1.5,0.5,2.2,1.6,2.2c0.2,0,0.3,0.1,0.3,0.2c0,0.2-0.1,0.3-0.4,0.3
				c-0.1,0-0.3,0-0.6-0.1c-0.6-0.1-1.4-0.1-1.7-0.1s-0.7,0.1-2,0.2h-0.1c-0.2,0-0.3-0.1-0.3-0.3c0-0.1,0.1-0.2,0.2-0.2
				c0.5-0.1,0.9-0.5,1-1c0.1-0.2,0.1-0.3,0.1-1.3V5.9c0.1-1.1-0.3-1.5-1.6-1.7c-0.2-0.1-0.3-0.1-0.3-0.2c0-0.2,0.1-0.3,0.3-0.3
				c0.1,0,0.3,0,0.6,0.1c0.3,0.1,1.1,0.1,1.6,0.1c0.2,0,0.2,0,1.2-0.1c0.3-0.1,0.8-0.1,1-0.1c0.2,0,0.3,0.1,0.3,0.2
				c0,0.2-0.1,0.2-0.3,0.3c-0.7,0.1-1,0.5-1,1.3v2.2c-0.1,1.1,0.1,1.1,1,1.1h3.9c0.7,0,0.8-0.2,0.7-1.4V5.8c0.1-1.1-0.3-1.5-1.6-1.7
				c-0.2-0.1-0.3-0.1-0.3-0.2c0-0.2,0.1-0.3,0.3-0.3c0.1,0,0.3,0,0.6,0.1c0.4,0.1,1.1,0.1,1.7,0.1c0.1,0,0.5-0.1,1.1-0.1
				c0.3-0.1,0.8-0.1,1-0.1c0.2,0,0.3,0.1,0.3,0.3c0,0.1-0.1,0.2-0.3,0.2c-0.7,0.1-1,0.5-1,1.3v7.3c-0.1,1.5,0.5,2.2,1.6,2.2
				c0.3,0,0.3,0.1,0.3,0.2c0,0.2-0.1,0.3-0.4,0.3c-0.1,0-0.3,0-0.6-0.1c-0.6-0.1-1.4-0.1-1.7-0.1c-0.3,0-0.7,0.1-2,0.2h-0.1
				c-0.2,0-0.3-0.1-0.3-0.3c0-0.1,0.1-0.2,0.2-0.2c0.5-0.1,0.9-0.5,1-1c0.1-0.2,0.1-0.3,0.1-1.3v-1.8c0-1.1-0.1-1.2-0.7-1.2
				L70.9,9.6L70.9,9.6L70.9,9.6z"/>
			<path class="st0" d="M84.7,7.6c0,1.1,0.1,1.2,0.7,1.2H86h0.7c0.7,0,1-0.3,1.5-1.4c0.1-0.2,0.1-0.2,0.3-0.2c0.1,0,0.2,0.1,0.2,0.2
				c0,0.1,0,0.2-0.1,0.4c0,0.2,0,0.3,0,0.4c0,0.1,0,0.2,0.1,1.3c0.1,0.5,0.1,1.1,0.1,1.6c0,0.2-0.1,0.2-0.2,0.2
				c-0.2,0-0.2-0.1-0.3-0.3c-0.3-1.3-0.6-1.5-2.6-1.4c-0.6,0-0.8,0.1-0.8,0.3c-0.1,0.3-0.1,0.4-0.1,1.7v0.8c0,0.7,0.1,1.5,0.2,1.7
				c0.2,0.5,0.4,0.7,1,0.7c1.6,0,2.7-0.3,3.5-1c0.3-0.3,0.7-0.7,0.9-1.1c0.1-0.1,0.1-0.1,0.1-0.1c0.2,0,0.2,0.1,0.2,0.2
				c0,0.6-0.3,1.4-0.6,1.9c-0.5,0.7-1.1,1-2.2,1c-0.5,0-0.6,0-2.2-0.2c-0.3-0.1-0.8-0.1-1.4-0.1c-0.6,0-0.7,0-1.9,0.1H82
				c-0.2,0-0.2-0.1-0.2-0.2c0-0.1,0.1-0.2,0.2-0.2c0.8-0.2,1-0.8,1-2.3V6.1c0-1.3-0.3-1.6-1.6-1.8c-0.2,0-0.2-0.1-0.2-0.3
				c0-0.1,0.1-0.2,0.3-0.2h0.3h0.4c1.5,0.1,2.2,0.1,4.3,0.1c0.8,0,2.7-0.1,3.1-0.1h0.2c0.2,0,0.2,0.1,0.2,0.3c0,0.2,0.1,0.4,0.1,0.7
				C90,5.6,90,5.6,90,5.8c0,0.4-0.2,0.7-0.3,0.7c-0.1,0-0.2-0.1-0.2-0.3c0-1.1-0.8-1.6-2.6-1.6h-0.8c-1.1,0-1.2,0.1-1.2,1.3v1.8
				H84.7z"/>
			<path class="st0" d="M99.1,5.7c0-1-0.2-1.3-1.5-1.5c-0.3-0.1-0.3-0.1-0.3-0.3s0.1-0.2,0.3-0.2c0.1,0,0.3,0,0.3,0.1
				c0.9,0.1,1.1,0.1,1.6,0.1c0.5,0,1.1-0.1,1.8-0.1c0.3,0,0.5-0.1,0.6-0.1c0.3,0,0.4,0.1,0.4,0.3c0,0.2-0.1,0.2-0.3,0.3
				c-0.4,0.1-0.5,0.1-0.7,0.3c-0.1,0.2-0.2,0.5-0.2,1c-0.1,0.8-0.1,1.5-0.2,2.2c0,4.1,0.1,4.2,0.4,5c0.6,1.2,1.8,1.9,3.4,1.9
				c0.8,0,1.6-0.3,2.3-0.7c1-0.7,1.4-1.7,1.5-3.9c0.1-0.7,0.1-1.4,0.1-2.4c0-1.3-0.1-1.9-0.2-2.3c-0.2-0.6-0.8-1.1-1.6-1.1
				c-0.3,0-0.3-0.1-0.3-0.3c0-0.2,0.1-0.2,0.2-0.2c0.1,0,0.1,0,0.2,0c0.2,0,1.4,0.1,1.6,0.1c0.3,0,1-0.1,1.5-0.1c0.1,0,0.2,0,0.3,0
				c0.2,0,0.3,0.1,0.3,0.2c0,0.2,0,0.2-0.5,0.3c-0.5,0.1-0.7,0.5-0.7,1.4v0.9c0,0.7-0.1,2.6-0.1,3.7c-0.1,2-0.6,3.4-1.5,4.2
				c-0.9,0.9-2.2,1.3-3.8,1.3s-2.9-0.4-3.6-1.1c-0.8-0.8-1.2-2.2-1.2-4.1l0.1-3.1V5.7z"/>
			<path class="st0" d="M121.4,10.7c0.7,0.8,0.9,1,1,1s0.2-0.1,0.2-0.2c0-0.2,0.1-3,0.1-4c0-2.6-0.4-3.2-2-3.4
				c-0.2,0-0.3-0.1-0.3-0.2c0-0.2,0.1-0.2,0.3-0.2c0.3,0,0.3,0,1,0.1c0.3,0.1,0.5,0.1,0.7,0.1c0.3,0,1.1-0.1,1.9-0.2
				c0.1,0,0.2,0,0.3,0c0.2,0,0.3,0.1,0.3,0.2c0,0.2-0.1,0.2-0.3,0.3c-0.8,0.2-1.1,0.9-1.1,2.3l-0.1,5.3c-0.1,1-0.1,1-0.1,1.3
				c0,0.8,0,1.6,0.1,1.9v0.1c0,0.2-0.1,0.2-0.2,0.2s-0.2-0.1-0.3-0.2l-7.6-8.5c-0.2-0.2-0.2-0.2-0.3-0.2c-0.2,0-0.2,0.2-0.2,0.6v3.3
				c0.1,4,0.2,4.3,1.9,4.6c0.2,0,0.3,0.1,0.3,0.2c0,0.2-0.1,0.3-0.3,0.3c-0.1,0-0.2,0-0.3-0.1c-0.4-0.1-1.1-0.1-1.6-0.1
				c-0.4,0-1.2,0.1-1.5,0.1c-0.2,0.1-0.3,0.1-0.4,0.1c-0.2,0-0.2-0.1-0.2-0.2c0-0.1,0.1-0.2,0.3-0.2c1.1-0.5,1.1-0.6,1.2-4.3v-1V7
				c0.1-1.6-0.7-2.7-1.9-2.7c-0.2,0-0.3-0.1-0.3-0.2c0-0.2,0.1-0.3,0.3-0.3h0.6c0.7,0,1.2,0,1.7-0.1c0.2,0,0.3-0.1,0.5-0.1
				c0.3,0,0.3,0.1,0.9,0.6c0.1,0.1,0.1,0.1,0.6,0.8c0.3,0.4,0.5,0.6,0.5,0.6L121.4,10.7z"/>
			<path class="st0" d="M130,12.4c0,1.8,0.3,2.4,1.6,2.5c0.3,0,0.4,0.1,0.4,0.3s-0.1,0.3-0.5,0.3c-0.2,0-0.4,0-0.7-0.1
				c-1-0.1-1.2-0.1-1.8-0.1c-0.5,0-1,0.1-1.3,0.1c-0.3,0.1-0.5,0.1-0.6,0.1c-0.2,0-0.3-0.1-0.3-0.3c0-0.1,0.1-0.2,0.3-0.2
				c0.3-0.1,0.8-0.4,0.9-0.7c0.1-0.3,0.1-0.4,0.1-1.6v-0.5V6.4c0.1-1.4-0.2-1.7-1.2-1.9c-0.6-0.1-0.7-0.2-0.7-0.3
				c0-0.2,0.1-0.2,0.2-0.2c0.1,0,0.3,0.1,0.5,0.1c0.2,0.1,0.6,0.1,1,0.1c0.4,0,0.8,0,1.7-0.1c0.6-0.1,1-0.1,1.4-0.1
				c0.2,0,0.3,0.1,0.3,0.2c0,0.2-0.1,0.3-0.3,0.3c-0.9,0.2-1,0.3-1,1.6V12.4L130,12.4z"/>
			<path class="st0" d="M139.5,12.6c0.1,0.3,0.2,0.3,0.2,0.3c0.1,0,0.1-0.1,0.2-0.3l1.9-4.2c0.6-1.3,1-2.4,1-3c0-0.3-0.2-0.8-0.5-1
				c-0.2-0.2-0.5-0.3-1-0.3c-0.2-0.1-0.3-0.1-0.3-0.3s0.1-0.2,0.2-0.2c0.1,0,0.1,0,1.4,0.1c0.4,0,0.7,0.1,0.9,0.1
				c0.3,0,0.8-0.1,1.3-0.1c0.3-0.1,0.3-0.1,0.3-0.1c0.1,0,0.2,0.1,0.2,0.2c0,0.2-0.1,0.2-0.3,0.3c-0.8,0.2-0.8,0.2-2.9,5.1l-2.2,4.8
				c-0.3,0.6-0.5,1-0.5,1.1c-0.1,0.3-0.2,0.3-0.4,0.3c-0.2,0-0.2,0-0.5-0.6l-0.2-0.5l-2-4.6c-0.2-0.4-0.3-0.9-0.6-1.3
				c-0.2-0.3-0.4-1-0.7-1.7c-0.7-2-1-2.4-1.8-2.7C133,4.1,133,4,133,3.9c0-0.2,0.1-0.2,0.3-0.2h0.3c0.2,0,2,0.1,2.3,0.1
				c0.5,0,0.5,0,1-0.1c0.3,0,0.6-0.1,0.8-0.1s0.2,0.1,0.2,0.3c0,0.2-0.1,0.2-0.3,0.3c-0.4,0.1-0.6,0.3-0.6,0.7c0,0.6,0.2,1.3,1,3
				L139.5,12.6z"/>
			<path class="st0" d="M150,7.6c0,1.1,0.1,1.2,0.7,1.2h0.6h0.7c0.7,0,1-0.3,1.5-1.4c0.1-0.2,0.1-0.2,0.3-0.2c0.1,0,0.2,0.1,0.2,0.2
				c0,0.1,0,0.2-0.1,0.4c0,0.2,0,0.3,0,0.4c0,0.1,0,0.2,0.1,1.3c0.1,0.5,0.1,1.1,0.1,1.6c0,0.2-0.1,0.2-0.2,0.2
				c-0.2,0-0.2-0.1-0.3-0.3c-0.3-1.3-0.6-1.5-2.6-1.4c-0.6,0-0.8,0.1-0.8,0.3c-0.1,0.3-0.1,0.4-0.1,1.7v0.8c0,0.7,0.1,1.5,0.2,1.7
				c0.2,0.5,0.4,0.7,1,0.7c1.6,0,2.7-0.3,3.5-1c0.3-0.3,0.7-0.7,0.9-1.1c0.1-0.1,0.1-0.1,0.1-0.1c0.2,0,0.2,0.1,0.2,0.2
				c0,0.6-0.3,1.4-0.6,1.9c-0.5,0.7-1.1,1-2.2,1c-0.5,0-0.6,0-2.2-0.2c-0.3-0.1-0.8-0.1-1.4-0.1c-0.6,0-0.7,0-1.9,0.1h-0.5
				c-0.2,0-0.2-0.1-0.2-0.2c0-0.1,0.1-0.2,0.2-0.2c0.8-0.2,1-0.8,1-2.3V6.1c0-1.3-0.3-1.6-1.6-1.8c-0.2,0-0.2-0.1-0.2-0.3
				c0-0.1,0.1-0.2,0.3-0.2h0.3h0.4c1.5,0.1,2.2,0.1,4.3,0.1c0.8,0,2.7-0.1,3.1-0.1h0.2c0.2,0,0.2,0.1,0.2,0.3c0,0.2,0.1,0.4,0.1,0.7
				c0.1,0.8,0.1,0.9,0.1,1c0,0.4-0.2,0.7-0.3,0.7c-0.1,0-0.2-0.1-0.2-0.3c0-1.1-0.8-1.6-2.6-1.6h-1c-1.1,0-1.2,0.1-1.2,1.3L150,7.6
				L150,7.6z"/>
			<path class="st0" d="M161.2,8.1c0,0.7,0,0.7,0.1,0.9c0.1,0.2,0.3,0.3,0.7,0.3c2.1,0,2.2,0,2.6-0.4c0.4-0.3,0.6-0.9,0.6-1.5
				c0-1.7-1.2-3-2.9-3c-0.8,0-1,0.3-1,1.1L161.2,8.1L161.2,8.1z M161.2,12.1c0,2.2,0.3,2.7,1.5,2.8c0.3,0,0.3,0.1,0.3,0.3
				c0,0.2-0.1,0.2-0.3,0.2h-0.3c-0.5-0.1-1-0.1-1.4-0.1c-0.6,0-0.9,0-1.7,0.1c-0.5,0.1-0.8,0.1-1,0.1c-0.2,0-0.3-0.1-0.3-0.3
				c0-0.2,0-0.2,0.2-0.2c0.9-0.3,1-0.6,1-2.2v-0.3V6.4c0.1-1.4-0.3-1.8-1.6-2c-0.3-0.1-0.3-0.1-0.3-0.3c0-0.2,0.1-0.2,0.2-0.2
				c0.1,0,0.2,0,0.3,0c0.3,0.1,1,0.1,1.4,0.1c0.5,0,1.5-0.1,2.1-0.1c0.9-0.1,1.6-0.1,2-0.1c2.1,0,3.7,1.3,3.7,3.1
				c0,1.1-0.6,2-1.7,2.6c-0.1,0.1-0.2,0.1-0.2,0.2c0,0.1,0.1,0.1,0.1,0.2c0,0.1,0.1,0.2,0.2,0.4c0.3,0.4,0.6,1,0.7,1.4l0.9,1.5
				c0.6,1,1,1.4,1.6,1.4c0.1,0,0.3,0,0.3-0.1c0.1,0,0.2-0.1,0.2-0.1c0.1,0,0.2,0.1,0.2,0.2c0,0.3-1.2,0.9-1.9,0.9
				c-0.6,0-1.2-0.3-1.7-1c-0.3-0.5-1.1-1.8-1.7-3.1c-0.5-1-0.6-1.1-1-1.3c-0.3-0.1-0.5-0.1-1.3-0.1c-0.5,0-0.5,0.1-0.5,0.7
				L161.2,12.1L161.2,12.1z"/>
			<path class="st0" d="M177.4,4.9c0,0.3,0,0.3,0.1,1.2c0.1,0.3,0.1,0.9,0.1,1c0,0.2-0.1,0.3-0.2,0.3c-0.1,0-0.2-0.1-0.3-0.3
				c-0.3-1.6-1.8-2.9-3.3-2.9c-1,0-1.9,0.9-1.9,1.7c0,0.5,0.3,1,0.6,1.3c0.3,0.2,0.6,0.3,1.9,0.9c1.4,0.6,2,1,2.4,1.4
				c0.6,0.6,1,1.5,1,2.4c0,1-0.3,1.8-1,2.6c-0.7,0.7-1.6,1.1-2.4,1.1c-0.4,0-1.1-0.2-1.9-0.4c-0.6-0.2-0.6-0.2-0.9-0.3
				c-0.3-0.1-0.3-0.1-0.5-0.2c-0.1-0.1-0.1-0.1-0.1-0.5c0-0.2-0.2-0.7-0.3-1.1c-0.3-1.1-0.3-1.1-0.3-1.5c0-0.3,0.1-0.4,0.3-0.4
				c0.1,0,0.2,0.1,0.2,0.2c0.6,1.9,2.1,3.5,3.5,3.5c1.2,0,2.2-1,2.2-2.2c0-0.6-0.3-1.1-0.7-1.4c-0.3-0.2-0.3-0.2-2.2-1
				c-1.4-0.6-1.9-1-2.4-1.5c-0.5-0.5-0.7-1.2-0.7-2c0-1.8,1.4-3.2,3.2-3.2c0.7,0,1,0.1,2.1,0.5c0.3,0.1,0.4,0.2,0.5,0.2
				s0.1,0,0.6-0.2c0.1,0,0.1-0.1,0.2-0.1c0.2,0,0.2,0.1,0.2,0.3L177.4,4.9z"/>
			<path class="st0" d="M183.6,12.4c0,1.8,0.3,2.4,1.6,2.5c0.3,0,0.4,0.1,0.4,0.3s-0.1,0.3-0.5,0.3c-0.2,0-0.4,0-0.7-0.1
				c-1-0.1-1.2-0.1-1.8-0.1c-0.5,0-1,0.1-1.3,0.1c-0.3,0.1-0.5,0.1-0.6,0.1c-0.2,0-0.3-0.1-0.3-0.3c0-0.1,0.1-0.2,0.3-0.2
				c0.3-0.1,0.8-0.4,0.9-0.7c0.1-0.3,0.1-0.4,0.1-1.6v-0.5V6.4c0.1-1.4-0.2-1.7-1.2-1.9c-0.6-0.1-0.7-0.2-0.7-0.3
				c0-0.2,0.1-0.2,0.2-0.2c0.1,0,0.3,0.1,0.5,0.1c0.2,0.1,0.6,0.1,1,0.1c0.4,0,0.8,0,1.7-0.1c0.6-0.1,1-0.1,1.4-0.1
				c0.2,0,0.3,0.1,0.3,0.2c0,0.2-0.1,0.3-0.3,0.3c-0.9,0.2-1,0.3-1,1.6L183.6,12.4L183.6,12.4z"/>
			<path class="st0" d="M193.2,12.2c0.1,1.3,0.1,1.5,0.4,2c0.3,0.5,0.8,0.7,1.5,0.7c0.3,0,0.3,0.1,0.3,0.3c0,0.2-0.1,0.2-0.3,0.2
				c-0.1,0-0.1,0-0.8-0.1c-1.1-0.1-1.1-0.1-1.4-0.1c-0.4,0-0.5,0-1.6,0.1l-1.1,0.1c-0.2,0-0.3,0.1-0.5,0.1c-0.2,0-0.2-0.1-0.2-0.2
				c0-0.3,0.1-0.3,0.4-0.3c1-0.2,1.5-0.7,1.4-2V5.5c0-0.7-0.1-0.9-0.8-0.9c-1.2,0-1.9,0.1-2.3,0.3s-0.5,0.5-0.7,1.5
				c-0.1,0.5-0.2,0.6-0.3,0.6c-0.2,0-0.3-0.1-0.3-0.3c0-0.1,0-0.1,0.1-0.4c0.1-0.2,0.1-0.2,0.1-1c0.1-0.3,0.1-0.5,0.1-0.7
				c0.1-0.2,0.1-0.3,0.1-0.5c0-0.3,0.1-0.3,0.3-0.3c0.1,0,0.2,0,0.3,0c0.2,0,0.5,0,1,0.1h1.7c1.6,0,1.6,0,2.1,0c1,0,3.2-0.1,4.1-0.1
				h0.6c0.4,0,0.4,0,0.5,1c0.1,0.4,0.1,0.6,0.1,0.7c0.1,0.2,0.1,0.6,0.1,0.7c0,0.2-0.1,0.3-0.2,0.3c-0.2,0-0.2-0.1-0.3-0.3
				c-0.1-0.5-0.4-1-0.7-1.2c-0.3-0.2-0.7-0.3-1.5-0.3c-1.6,0-1.9,0.2-1.9,1.2L193.2,12.2L193.2,12.2z"/>
			<path class="st0" d="M205,13c-0.1,1.5,0.2,1.7,1.7,1.9c0.2,0,0.3,0.1,0.3,0.3s-0.1,0.2-0.4,0.2c-0.2,0-0.2,0-1.6-0.1
				c-0.2,0-0.6-0.1-1.1-0.1c-0.9,0-1.6,0.1-2,0.1c-0.3,0.1-0.5,0.1-0.5,0.1c-0.1,0-0.2-0.1-0.2-0.2c0-0.2,0.1-0.2,0.2-0.3
				c1.3-0.3,1.6-0.6,1.6-2.2v-1.6c0-0.5-0.1-0.7-0.3-1.2c-0.3-0.5-0.6-1-1-1.7c-0.4-0.9-0.8-1.6-1.3-2.4c-0.6-1-1-1.4-1.7-1.6
				c-0.3-0.1-0.3-0.1-0.3-0.2c0-0.2,0.1-0.3,0.3-0.3c0.1,0,0.3,0,1.4,0.1c0.3,0,0.6,0.1,1,0.1c0.5,0,0.9,0,1.4-0.1
				c0.4-0.1,0.6-0.1,0.7-0.1c0.3,0,0.3,0.1,0.3,0.2c0,0.1-0.1,0.2-0.3,0.3c-0.4,0.1-0.7,0.3-0.7,0.6c0,0.3,0.1,0.6,0.6,1.5
				c0.2,0.3,0.7,1.5,1.1,2.2c0.2,0.4,0.3,0.6,0.5,0.6c0.2,0,0.3-0.2,0.7-0.9c0.3-0.7,0.5-1,0.6-1c0.7-1.4,1-1.8,1-2.1
				c0-0.5-0.6-1-1.4-1c-0.2,0-0.3-0.1-0.3-0.2c0-0.2,0.1-0.3,0.3-0.3c0.2,0,0.2,0,1,0.1c0.2,0.1,0.5,0.1,0.8,0.1
				c0.3,0,0.3,0,1.4-0.1c0.1,0,0.3,0,0.6,0h0.1c0.2,0,0.2,0.1,0.2,0.2s-0.1,0.2-0.3,0.3c-1,0.3-1.2,0.6-2,2.2
				c-0.6,1.1-1.5,2.7-2,3.5c-0.3,0.4-0.3,0.4-0.3,1V13H205z"/>
			<path class="st0" d="M218.4,8.9c0,3.6,1.7,6,4.3,6c1.1,0,2.1-0.5,2.8-1.3c0.6-0.9,1-2.3,1-3.7c0-1.6-0.6-3.3-1.5-4.4
				c-0.7-0.9-1.9-1.4-3-1.4C219.8,4.3,218.4,6,218.4,8.9 M228.4,9.2c0,1.9-0.8,3.8-2,5c-1,1-2.4,1.5-4.1,1.5c-3.6,0-5.9-2.3-5.9-5.9
				c0-1.7,0.7-3.5,1.9-4.6c1.1-1,2.7-1.6,4.4-1.6C226.1,3.6,228.4,5.8,228.4,9.2"/>
			<path class="st0" d="M234.1,8c0,0.6,0.1,0.8,0.6,0.8h0.3c1.7,0,2-0.2,2.5-1.4c0.1-0.2,0.1-0.2,0.2-0.2c0.2,0,0.2,0.1,0.2,0.2
				c0,0,0,0.1,0,0.2V8c0,0.4,0,0.7,0.2,2.2c0,0.3,0.1,0.9,0.1,1c0,0.1-0.1,0.2-0.2,0.2c-0.2,0-0.2-0.1-0.2-0.2
				c-0.2-1.1-0.6-1.5-1.9-1.5c-0.9,0-1.3,0.1-1.5,0.2c-0.2,0.1-0.2,0.1-0.2,1.5v0.4v1c0.1,1.7,0.5,2.2,1.7,2.3
				c0.2,0,0.3,0.1,0.3,0.2c0,0.2-0.1,0.2-0.2,0.2l-1.7-0.1h-1c-0.4,0-0.8,0-1.1,0.1c-0.3,0.1-0.7,0.1-0.8,0.1
				c-0.2,0-0.3-0.1-0.3-0.2c0-0.2,0-0.2,0.3-0.2c0.7-0.2,0.9-0.8,0.8-2v-7c0-1.3-0.3-1.6-1.6-1.8c-0.2,0-0.2-0.1-0.2-0.2
				s0.1-0.2,0.3-0.2c0.1,0,0.3,0,0.4,0.1c0.3,0.1,0.6,0.1,1,0.1h1.6h2.2c0.5,0,2.3-0.1,2.9-0.1h0.1c0.2,0,0.2,0,0.3,1
				c0.1,0.9,0.1,0.9,0.1,1c0,0.5-0.1,0.7-0.3,0.7c-0.1,0-0.2-0.1-0.2-0.2c-0.1-0.6-0.1-0.7-0.2-1c-0.3-0.6-0.9-0.7-1.9-0.8h-1.3
				c-0.6,0-0.8,0.1-1,0.2c-0.1,0.2-0.2,0.2-0.2,0.9v2.2h-0.1V8z"/>
			<path class="st0" d="M252.3,12.2c0.1,1.3,0.1,1.5,0.4,2c0.3,0.5,0.8,0.7,1.5,0.7c0.3,0,0.3,0.1,0.3,0.3c0,0.2-0.1,0.2-0.3,0.2
				c-0.1,0-0.1,0-0.8-0.1c-1.1-0.1-1.1-0.1-1.4-0.1c-0.4,0-0.5,0-1.6,0.1l-1.1,0.1c-0.2,0-0.3,0.1-0.5,0.1c-0.2,0-0.2-0.1-0.2-0.2
				c0-0.3,0.1-0.3,0.4-0.3c1-0.2,1.5-0.7,1.4-2V5.5c0-0.7-0.1-0.9-0.8-0.9c-1.2,0-1.9,0.1-2.3,0.3s-0.5,0.4-0.8,1.5
				c-0.1,0.5-0.2,0.6-0.3,0.6c-0.1,0-0.3-0.1-0.3-0.3c0-0.1,0-0.1,0.1-0.4c0.1-0.2,0.1-0.2,0.1-1c0.1-0.3,0.1-0.5,0.1-0.7
				c0.1-0.2,0.1-0.3,0.1-0.5c0-0.3,0.1-0.3,0.3-0.3c0.1,0,0.2,0,0.3,0c0.2,0,0.5,0,1,0.1h1.7c1.6,0,1.6,0,2.1,0c1,0,3.2-0.1,4.1-0.1
				h0.6c0.4,0,0.4,0,0.5,1c0.1,0.4,0.1,0.6,0.1,0.7c0.1,0.2,0.1,0.6,0.1,0.7c0,0.2-0.1,0.3-0.2,0.3c-0.2,0-0.2-0.1-0.3-0.3
				c-0.1-0.5-0.4-1-0.7-1.2c-0.3-0.2-0.7-0.3-1.5-0.3c-1.6,0-1.9,0.2-1.9,1.2L252.3,12.2L252.3,12.2z"/>
			<path class="st0" d="M261.9,7.6c0,1.1,0.1,1.2,0.7,1.2h0.6h0.7c0.7,0,1-0.3,1.5-1.4c0.1-0.2,0.1-0.2,0.3-0.2
				c0.1,0,0.2,0.1,0.2,0.2c0,0.1,0,0.2-0.1,0.4c0,0.2,0,0.3,0,0.4c0,0.1,0,0.2,0.1,1.3c0.1,0.5,0.1,1.1,0.1,1.6
				c0,0.2-0.1,0.2-0.2,0.2c-0.2,0-0.2-0.1-0.3-0.3c-0.3-1.3-0.6-1.5-2.6-1.4c-0.6,0-0.8,0.1-0.8,0.3c-0.1,0.3-0.1,0.4-0.1,1.7v0.8
				c0,0.7,0.1,1.5,0.2,1.7c0.2,0.5,0.4,0.7,1,0.7c1.6,0,2.7-0.3,3.5-1c0.3-0.3,0.7-0.7,0.9-1.1c0.1-0.1,0.1-0.1,0.1-0.1
				c0.2,0,0.2,0.1,0.2,0.2c0,0.6-0.3,1.4-0.6,1.9c-0.5,0.7-1.1,1-2.2,1c-0.5,0-0.6,0-2.2-0.2c-0.3-0.1-0.8-0.1-1.4-0.1
				c-0.6,0-0.7,0-1.9,0.1h-0.5c-0.2,0-0.2-0.1-0.2-0.2c0-0.1,0.1-0.2,0.2-0.2c0.8-0.2,1-0.8,1-2.3V6.1c0-1.3-0.3-1.6-1.6-1.8
				c-0.2,0-0.2-0.1-0.2-0.3c0-0.1,0.1-0.2,0.3-0.2h0.3h0.4c1.5,0.1,2.2,0.1,4.3,0.1c0.8,0,2.7-0.1,3.1-0.1h0.2
				c0.2,0,0.2,0.1,0.2,0.3c0,0.2,0.1,0.4,0.1,0.7c0.1,0.8,0.1,0.9,0.1,1c0,0.4-0.2,0.7-0.3,0.7c-0.1,0-0.2-0.1-0.2-0.3
				c0-1.1-0.8-1.6-2.6-1.6h-0.8c-1.1,0-1.2,0.1-1.2,1.3v1.8H261.9z"/>
			<path class="st0" d="M278.5,10.7c0.7,0.8,0.9,1,1,1s0.2-0.1,0.2-0.2c0-0.2,0.1-3,0.1-4c0-2.6-0.4-3.2-2-3.4
				c-0.2,0-0.3-0.1-0.3-0.2c0-0.2,0.1-0.2,0.3-0.2c0.3,0,0.3,0,1,0.1c0.3,0.1,0.5,0.1,0.7,0.1c0.3,0,1.1-0.1,1.9-0.2
				c0.1,0,0.2,0,0.3,0c0.2,0,0.3,0.1,0.3,0.2c0,0.2-0.1,0.2-0.3,0.3c-0.8,0.2-1.1,0.9-1.1,2.3l-0.1,5.3c-0.1,1-0.1,1-0.1,1.3
				c0,0.8,0,1.6,0.1,1.9v0.1c0,0.2-0.1,0.2-0.2,0.2c-0.1,0-0.2-0.1-0.3-0.2l-7.7-8.5c-0.2-0.2-0.2-0.2-0.3-0.2
				c-0.2,0-0.2,0.2-0.2,0.6v3.3c0.1,4,0.2,4.3,1.9,4.6c0.2,0,0.3,0.1,0.3,0.2c0,0.2-0.1,0.3-0.3,0.3c-0.1,0-0.2,0-0.3-0.1
				c-0.4-0.1-1.1-0.1-1.6-0.1s-1.2,0.1-1.5,0.1c-0.2,0.1-0.3,0.1-0.4,0.1c-0.2,0-0.2-0.1-0.2-0.2c0-0.1,0.1-0.2,0.3-0.2
				c1.1-0.5,1.1-0.6,1.2-4.3v-1V7c0.1-1.6-0.7-2.7-1.9-2.7c-0.2,0-0.3-0.1-0.3-0.2c0-0.2,0.1-0.3,0.3-0.3h0.6c0.7,0,1.2,0,1.7-0.1
				c0.2,0,0.3-0.1,0.5-0.1c0.3,0,0.3,0.1,0.9,0.6c0.1,0.1,0.1,0.1,0.6,0.8c0.3,0.4,0.5,0.6,0.5,0.6L278.5,10.7z"/>
			<path class="st0" d="M292.5,10.7c0.7,0.8,0.9,1,1,1s0.2-0.1,0.2-0.2c0-0.2,0.1-3,0.1-4c0-2.6-0.4-3.2-2-3.4
				c-0.2,0-0.3-0.1-0.3-0.2c0-0.2,0.1-0.2,0.3-0.2c0.3,0,0.3,0,1,0.1c0.3,0.1,0.5,0.1,0.7,0.1c0.3,0,1.1-0.1,1.9-0.2
				c0.1,0,0.2,0,0.3,0c0.2,0,0.3,0.1,0.3,0.2c0,0.2-0.1,0.2-0.3,0.3c-0.8,0.2-1.1,0.9-1.1,2.3l-0.1,5.3c-0.1,1-0.1,1-0.1,1.3
				c0,0.8,0,1.6,0.1,1.9v0.1c0,0.2-0.1,0.2-0.2,0.2c-0.1,0-0.2-0.1-0.3-0.2l-7.7-8.5c-0.2-0.2-0.2-0.2-0.3-0.2
				c-0.2,0-0.2,0.2-0.2,0.6v3.3c0.1,4,0.2,4.3,1.9,4.6c0.2,0,0.3,0.1,0.3,0.2c0,0.2-0.1,0.3-0.3,0.3c-0.1,0-0.2,0-0.3-0.1
				c-0.4-0.1-1.1-0.1-1.6-0.1s-1.2,0.1-1.5,0.1c-0.2,0.1-0.3,0.1-0.4,0.1c-0.2,0-0.2-0.1-0.2-0.2c0-0.1,0.1-0.2,0.3-0.2
				c1.1-0.5,1.1-0.6,1.2-4.3v-1V7c0.1-1.6-0.7-2.7-1.9-2.7c-0.2,0-0.3-0.1-0.3-0.2c0-0.2,0.1-0.3,0.3-0.3h0.6c0.7,0,1.2,0,1.7-0.1
				c0.2,0,0.3-0.1,0.5-0.1c0.3,0,0.3,0.1,0.9,0.6c0.1,0.1,0.1,0.1,0.6,0.8c0.3,0.4,0.5,0.6,0.5,0.6L292.5,10.7z"/>
			<path class="st0" d="M301.2,7.6c0,1.1,0.1,1.2,0.7,1.2h0.6h0.7c0.7,0,1-0.3,1.5-1.4c0.1-0.2,0.1-0.2,0.3-0.2
				c0.1,0,0.2,0.1,0.2,0.2c0,0.1,0,0.2-0.1,0.4c0,0.2,0,0.3,0,0.4c0,0.1,0,0.2,0.1,1.3c0.1,0.5,0.1,1.1,0.1,1.6
				c0,0.2-0.1,0.2-0.2,0.2c-0.2,0-0.2-0.1-0.3-0.3c-0.3-1.3-0.6-1.5-2.6-1.4c-0.6,0-0.8,0.1-0.8,0.3c-0.1,0.3-0.1,0.4-0.1,1.7v0.8
				c0,0.7,0.1,1.5,0.2,1.7c0.2,0.5,0.4,0.7,1,0.7c1.6,0,2.7-0.3,3.5-1c0.3-0.3,0.7-0.7,0.9-1.1c0.1-0.1,0.1-0.1,0.1-0.1
				c0.2,0,0.2,0.1,0.2,0.2c0,0.6-0.3,1.4-0.6,1.9c-0.5,0.7-1.1,1-2.2,1c-0.5,0-0.6,0-2.2-0.2c-0.3-0.1-0.8-0.1-1.4-0.1
				c-0.6,0-0.7,0-1.9,0.1h-0.6c-0.2,0-0.2-0.1-0.2-0.2c0-0.1,0.1-0.2,0.2-0.2c0.8-0.2,1-0.8,1-2.3V6.1c0-1.3-0.3-1.6-1.6-1.8
				c-0.2,0-0.2-0.1-0.2-0.3c0-0.1,0.1-0.2,0.3-0.2h0.3h0.4c1.5,0.1,2.2,0.1,4.3,0.1c0.8,0,2.7-0.1,3.1-0.1h0.2
				c0.2,0,0.2,0.1,0.2,0.3c0,0.2,0.1,0.4,0.1,0.7c0.1,0.8,0.1,0.9,0.1,1c0,0.4-0.2,0.7-0.3,0.7c-0.1,0-0.2-0.1-0.2-0.3
				c0-1.1-0.8-1.6-2.6-1.6h-0.8c-1.1,0-1.2,0.1-1.2,1.3v1.8H301.2z"/>
			<path class="st0" d="M315.6,4.9c0,0.3,0,0.3,0.1,1.2c0.1,0.3,0.1,0.9,0.1,1c0,0.2-0.1,0.3-0.2,0.3c-0.1,0-0.2-0.1-0.3-0.3
				c-0.3-1.6-1.7-2.9-3.3-2.9c-1,0-1.9,0.9-1.9,1.7c0,0.5,0.3,1,0.6,1.3c0.3,0.2,0.6,0.3,1.9,0.9c1.4,0.6,2,1,2.4,1.4
				c0.6,0.6,1,1.5,1,2.4c0,1-0.3,1.8-1,2.6c-0.7,0.7-1.6,1.1-2.4,1.1c-0.4,0-1.1-0.2-1.9-0.4c-0.6-0.2-0.6-0.2-0.9-0.3
				c-0.3-0.1-0.3-0.1-0.5-0.2c-0.1-0.1-0.1-0.1-0.1-0.5c0-0.2-0.2-0.7-0.3-1.1c-0.3-1.1-0.3-1.1-0.3-1.5c0-0.3,0.1-0.4,0.3-0.4
				c0.1,0,0.2,0.1,0.2,0.2c0.6,1.9,2.1,3.5,3.5,3.5c1.2,0,2.2-1,2.2-2.2c0-0.6-0.3-1.1-0.7-1.4c-0.3-0.2-0.3-0.2-2.2-1
				c-1.4-0.6-1.9-1-2.4-1.5c-0.5-0.5-0.7-1.2-0.7-2c0-1.8,1.4-3.2,3.2-3.2c0.7,0,1,0.1,2.1,0.5c0.3,0.1,0.4,0.2,0.5,0.2
				s0.1,0,0.6-0.2c0.1,0,0.1-0.1,0.2-0.1c0.2,0,0.2,0.1,0.2,0.3L315.6,4.9z"/>
			<path class="st0" d="M325.2,4.9c0,0.3,0,0.3,0.1,1.2c0.1,0.3,0.1,0.9,0.1,1c0,0.2-0.1,0.3-0.2,0.3c-0.1,0-0.2-0.1-0.3-0.3
				c-0.3-1.6-1.8-2.9-3.3-2.9c-1,0-1.9,0.9-1.9,1.7c0,0.5,0.3,1,0.6,1.3c0.3,0.2,0.6,0.3,1.9,0.9c1.4,0.6,2,1,2.4,1.4
				c0.6,0.6,1,1.5,1,2.4c0,1-0.3,1.8-1,2.6c-0.7,0.7-1.6,1.1-2.4,1.1c-0.4,0-1.1-0.2-1.9-0.4c-0.6-0.2-0.6-0.2-0.9-0.3
				c-0.3-0.1-0.3-0.1-0.5-0.2c-0.1-0.1-0.1-0.1-0.1-0.5c0-0.2-0.2-0.7-0.3-1.1c-0.3-1.1-0.3-1.1-0.3-1.5c0-0.3,0.1-0.4,0.3-0.4
				c0.1,0,0.2,0.1,0.2,0.2c0.6,1.9,2.1,3.5,3.5,3.5c1.2,0,2.2-1,2.2-2.2c0-0.6-0.3-1.1-0.7-1.4c-0.3-0.2-0.3-0.2-2.2-1
				c-1.4-0.6-1.9-1-2.4-1.5c-0.5-0.5-0.7-1.2-0.7-2c0-1.8,1.4-3.2,3.2-3.2c0.7,0,1,0.1,2.1,0.5c0.3,0.1,0.4,0.2,0.5,0.2
				s0.1,0,0.6-0.2c0.1,0,0.1-0.1,0.2-0.1c0.2,0,0.2,0.1,0.2,0.3L325.2,4.9z"/>
			<path class="st0" d="M331.3,7.6c0,1.1,0.1,1.2,0.7,1.2h0.6h0.7c0.7,0,1-0.3,1.5-1.4c0.1-0.2,0.1-0.2,0.3-0.2
				c0.1,0,0.2,0.1,0.2,0.2c0,0.1,0,0.2-0.1,0.4c0,0.2,0,0.3,0,0.4c0,0.1,0,0.2,0.1,1.3c0.1,0.5,0.1,1.1,0.1,1.6
				c0,0.2-0.1,0.2-0.2,0.2c-0.2,0-0.2-0.1-0.3-0.3c-0.3-1.3-0.6-1.5-2.6-1.4c-0.6,0-0.8,0.1-0.8,0.3c-0.1,0.3-0.1,0.4-0.1,1.7v0.8
				c0,0.7,0.1,1.5,0.2,1.7c0.2,0.5,0.4,0.7,1,0.7c1.6,0,2.7-0.3,3.5-1c0.3-0.3,0.7-0.7,0.9-1.1c0.1-0.1,0.1-0.1,0.1-0.1
				c0.2,0,0.2,0.1,0.2,0.2c0,0.6-0.3,1.4-0.6,1.9c-0.5,0.7-1.1,1-2.2,1c-0.5,0-0.6,0-2.2-0.2c-0.3-0.1-0.8-0.1-1.4-0.1
				c-0.6,0-0.7,0-1.9,0.1h-0.5c-0.2,0-0.2-0.1-0.2-0.2c0-0.1,0.1-0.2,0.2-0.2c0.8-0.2,1-0.8,1-2.3V6.1c0-1.3-0.3-1.6-1.6-1.8
				c-0.2,0-0.2-0.1-0.2-0.3c0-0.1,0.1-0.2,0.3-0.2h0.3h0.4c1.5,0.1,2.2,0.1,4.3,0.1c0.8,0,2.7-0.1,3.1-0.1h0.2
				c0.2,0,0.2,0.1,0.2,0.3c0,0.2,0.1,0.4,0.1,0.7c0.1,0.8,0.1,0.9,0.1,1c0,0.4-0.2,0.7-0.3,0.7c-0.1,0-0.2-0.1-0.2-0.3
				c0-1.1-0.8-1.6-2.6-1.6h-0.8c-1.1,0-1.2,0.1-1.2,1.3v1.8H331.3z"/>
			<path class="st0" d="M342.5,7.6c0,1.1,0.1,1.2,0.7,1.2h0.6h0.7c0.7,0,1-0.3,1.5-1.4c0.1-0.2,0.1-0.2,0.3-0.2
				c0.1,0,0.2,0.1,0.2,0.2c0,0.1,0,0.2-0.1,0.4c0,0.2,0,0.3,0,0.4c0,0.1,0,0.2,0.1,1.3c0.1,0.5,0.1,1.1,0.1,1.6
				c0,0.2-0.1,0.2-0.2,0.2c-0.2,0-0.2-0.1-0.3-0.3c-0.3-1.3-0.6-1.5-2.6-1.4c-0.6,0-0.8,0.1-0.8,0.3c-0.1,0.3-0.1,0.4-0.1,1.7v0.8
				c0,0.7,0.1,1.5,0.2,1.7c0.2,0.5,0.4,0.7,1,0.7c1.6,0,2.7-0.3,3.5-1c0.3-0.3,0.7-0.7,0.9-1.1c0.1-0.1,0.1-0.1,0.1-0.1
				c0.2,0,0.2,0.1,0.2,0.2c0,0.6-0.3,1.4-0.6,1.9c-0.5,0.7-1.1,1-2.2,1c-0.5,0-0.6,0-2.2-0.2c-0.3-0.1-0.8-0.1-1.4-0.1
				c-0.6,0-0.7,0-1.9,0.1h-0.5c-0.2,0-0.2-0.1-0.2-0.2c0-0.1,0.1-0.2,0.2-0.2c0.8-0.2,1-0.8,1-2.3V6.1c0-1.3-0.3-1.6-1.6-1.8
				c-0.2,0-0.2-0.1-0.2-0.3c0-0.1,0.1-0.2,0.3-0.2h0.3h0.4c1.5,0.1,2.2,0.1,4.3,0.1c0.8,0,2.7-0.1,3.1-0.1h0.2
				c0.2,0,0.2,0.1,0.2,0.3c0,0.2,0.1,0.4,0.1,0.7c0.1,0.8,0.1,0.9,0.1,1c0,0.4-0.2,0.7-0.3,0.7c-0.1,0-0.2-0.1-0.2-0.3
				c0-1.1-0.8-1.6-2.6-1.6h-0.8c-1.1,0-1.2,0.1-1.2,1.3v1.8H342.5z"/>
			<path class="st0" d="M76.5,25.8c0.1,0.7,0.1,0.9,0.3,2.2c0.1,0.3,0.1,0.8,0.1,1c0,0.5-0.2,0.7-0.5,0.7c-0.2,0-0.3-0.1-0.3-0.5
				c-0.2-1.1-1.9-3.8-3.2-5c-2.1-2-4.2-3-6.6-3c-2,0-3.5,0.7-5,2.3c-1.9,2-2.8,4.6-2.8,8c0,3.6,1,6.8,3,9.2c1.7,2,4.1,3.3,6.4,3.3
				c2,0,4.2-0.9,6-2.2c0.8-0.5,0.8-0.5,2.3-2.2c0.2-0.2,0.3-0.3,0.5-0.3c0.2,0,0.3,0.2,0.3,0.3c0,0.5-0.8,1.8-1.9,2.8
				c-2.4,2.5-5.6,3.9-9.1,3.9c-7.2,0-12.1-5.1-12.1-12.7c0-3.5,1.6-7.5,3.9-10c2.3-2.3,5.6-3.7,9-3.7c2.7,0,4.1,0.5,7.1,2.2
				c0.2,0.2,0.5,0.2,0.7,0.2c0.3,0,0.3,0,1-0.9c0.1-0.1,0.2-0.2,0.3-0.2c0.5,0,0.6,0.1,0.6,2.6L76.5,25.8L76.5,25.8z"/>
			<path class="st0" d="M88.8,33.3c-1.6-0.1-2,0.3-1.9,2.2v4.7c-0.1,3.4,1,4.8,3.5,5c0.5,0,0.7,0.1,0.7,0.5c0,0.4-0.2,0.6-1,0.6
				c-0.2,0-0.6-0.1-1.4-0.1c-1.2-0.2-3.1-0.3-3.9-0.3c-0.7,0-1.6,0.1-4.4,0.3h-0.2c-0.3,0-0.6-0.2-0.6-0.6c0-0.3,0.1-0.3,0.5-0.4
				c1-0.2,2-1,2.2-2.2c0.1-0.4,0.1-0.6,0.2-2.8V25.3c0.1-2.4-0.8-3.4-3.4-3.8c-0.4-0.1-0.5-0.2-0.5-0.5c0-0.4,0.2-0.6,0.6-0.6
				c0.2,0,0.7,0.1,1.2,0.1c0.8,0.2,2.4,0.2,3.7,0.2c0.3,0,0.3,0,2.8-0.2c0.6-0.1,1.8-0.2,2.1-0.2c0.3,0,0.6,0.2,0.6,0.5
				c0,0.2-0.2,0.5-0.5,0.5c-1.6,0.2-2.2,1-2.2,2.8v4.7c-0.1,2.4,0.1,2.6,2,2.6h8.6c1.5,0,1.6-0.4,1.6-3v-3.3
				c0.1-2.4-0.8-3.4-3.4-3.7c-0.4-0.1-0.5-0.2-0.5-0.5c0-0.4,0.2-0.6,0.6-0.6c0.2,0,0.7,0.1,1.2,0.1c1,0.2,2.4,0.2,3.9,0.2
				c0.2,0,1.2-0.1,2.5-0.2c0.7-0.1,1.7-0.2,2-0.2c0.5,0,0.6,0.2,0.6,0.5c0,0.3-0.2,0.4-0.5,0.5c-1.6,0.2-2.2,1-2.2,2.8v16
				c-0.1,3.3,1,4.9,3.5,5c0.5,0,0.7,0.1,0.7,0.5c0,0.4-0.2,0.6-1,0.6c-0.2,0-0.6-0.1-1.4-0.1c-1.2-0.2-3.1-0.3-3.9-0.3
				c-0.7,0-1.6,0.1-4.4,0.3h-0.2c-0.3,0-0.6-0.2-0.6-0.6c0-0.3,0.1-0.3,0.5-0.4c1-0.2,2-1,2.2-2.2c0.1-0.4,0.1-0.6,0.2-2.8v-4.1
				c0-2.3-0.2-2.6-1.6-2.6h-8.6V33.3z"/>
			<path class="st0" d="M121.7,28.6c-0.5-1.3-1-2-1.2-2s-0.2,0-1.2,2.1l-2.2,5c-0.3,0.8-0.3,0.8-0.3,1c0,0.5,0.3,0.6,1.4,0.6h5
				c1,0,1.1-0.1,1.1-0.3c0-0.1,0-0.2-0.2-0.5L121.7,28.6z M131.8,42.1c1.2,2.3,1.6,2.6,3.7,3.2c0.3,0.1,0.3,0.2,0.3,0.5
				s-0.2,0.5-0.4,0.5c-0.1,0-0.3-0.1-0.7-0.1c-0.8-0.2-3.2-0.3-4.6-0.3c-1.6,0-3.7,0.1-4.3,0.3c-0.2,0.1-0.3,0.1-0.5,0.1
				c-0.3,0-0.5-0.3-0.5-0.5c0-0.2,0.1-0.3,0.4-0.3c1.2-0.3,2-1.4,2-2.3c0-0.7-0.7-2.8-1.7-4.9c-0.4-1-0.8-1-3-1h-4.7
				c-1.7,0-2.2,0.3-2.9,2.2c-1,2.2-1.1,2.7-1.1,3.3c0,1.5,1.1,2.4,3.3,2.7c0.5,0.1,0.7,0.2,0.7,0.5c0,0.3-0.3,0.5-0.6,0.5
				c-0.3,0-0.6-0.1-1-0.1c-0.8-0.2-1.5-0.3-2.2-0.3c-0.6,0-1.4,0.1-3.8,0.3l-0.9,0.1c-0.3,0-0.5-0.2-0.5-0.5c0-0.3,0.1-0.4,0.5-0.5
				c1.4-0.5,1.7-1,3.4-4.7l5-11.7c0.4-1,0.7-1.6,0.9-1.9l1.7-3.6c1.5-3.1,1.5-3.1,1.6-3.1c0.3,0,0.8,1,1.5,2.6L131.8,42.1z"/>
			<path class="st0" d="M148,39.1c0.1,2.8,0.2,3.4,0.9,4.3c0.7,1,1.7,1.5,3.2,1.6c0.5,0,0.7,0.2,0.7,0.6c0,0.3-0.1,0.5-0.6,0.5
				c-0.1,0-0.1,0-1.9-0.1c-2.5-0.2-2.5-0.2-3-0.2c-1,0-1.2,0-3.4,0.2l-2.5,0.2c-0.4,0.1-0.8,0.1-1,0.1c-0.3,0-0.5-0.2-0.5-0.5
				c0-0.5,0.2-0.7,1-0.7c2.3-0.3,3.2-1.6,3-4.5V24.3c0-1.6-0.3-1.9-1.9-1.9c-2.6,0-4.2,0.3-5.2,0.8c-1,0.5-1.2,1-1.7,3.2
				c-0.3,1-0.4,1.3-0.8,1.3c-0.3,0-0.6-0.2-0.6-0.6c0-0.1,0-0.1,0.1-1c0.1-0.5,0.1-0.5,0.3-2.2c0.1-0.5,0.2-1.1,0.2-1.6
				c0.1-0.4,0.1-0.8,0.2-1.1c0.1-0.6,0.2-0.7,0.7-0.7c0.1,0,0.4,0,0.7,0.1c0.3,0.1,1.1,0.1,2,0.1l3.8,0.1c3.6,0.1,3.6,0.1,4.6,0.1
				c2.1,0,7.1-0.1,9.1-0.2l1.4-0.1c1,0,1,0,1.1,2.2c0.1,0.9,0.2,1.4,0.2,1.5c0.1,0.5,0.2,1.4,0.2,1.6c0,0.3-0.2,0.6-0.5,0.6
				c-0.3,0-0.5-0.2-0.6-0.7c-0.2-1-1-2-1.6-2.6c-0.7-0.5-1.5-0.6-3.2-0.6c-3.6,0-4.1,0.3-4.1,2.6L148,39.1L148,39.1z"/>
			<path class="st0" d="M175.3,39.1c0.1,2.8,0.2,3.4,0.9,4.3c0.7,1,1.7,1.5,3.2,1.6c0.5,0,0.7,0.2,0.7,0.6c0,0.3-0.1,0.5-0.6,0.5
				c-0.1,0-0.1,0-1.9-0.1c-2.5-0.2-2.5-0.2-3-0.2c-1,0-1.2,0-3.4,0.2l-2.5,0.2c-0.4,0.1-0.8,0.1-1,0.1c-0.3,0-0.5-0.2-0.5-0.5
				c0-0.5,0.2-0.7,1-0.7c2.3-0.3,3.2-1.6,3-4.5V24.3c0-1.6-0.3-1.9-1.9-1.9c-2.6,0-4.2,0.3-5.2,0.8c-1,0.5-1.2,1-1.7,3.2
				c-0.3,1-0.4,1.3-0.8,1.3s-0.6-0.2-0.6-0.6c0-0.1,0-0.1,0.1-1c0.1-0.5,0.1-0.5,0.3-2.2c0.1-0.5,0.2-1.1,0.2-1.6
				c0.1-0.4,0.1-0.8,0.2-1.1c0.1-0.6,0.2-0.7,0.7-0.7c0.1,0,0.4,0,0.7,0.1c0.3,0.1,1.1,0.1,2,0.1l3.8,0.1c3.6,0.1,3.6,0.1,4.6,0.1
				c2.1,0,7.1-0.1,9.1-0.2l1.4-0.1c1,0,1,0,1.1,2.2c0.1,0.9,0.2,1.4,0.2,1.5c0.1,0.5,0.2,1.4,0.2,1.6c0,0.3-0.2,0.6-0.5,0.6
				c-0.3,0-0.5-0.2-0.6-0.7c-0.2-1-1-2-1.6-2.6c-0.7-0.5-1.5-0.6-3.2-0.6c-3.6,0-4.1,0.3-4.1,2.6L175.3,39.1L175.3,39.1z"/>
			<path class="st0" d="M196.7,28.6c-0.5-1.3-1-2-1.2-2c-0.2,0-0.2,0-1.2,2.1l-2.2,5c-0.3,0.8-0.3,0.8-0.3,1c0,0.5,0.3,0.6,1.4,0.6
				h5c1,0,1.1-0.1,1.1-0.3c0-0.1,0-0.2-0.2-0.5L196.7,28.6z M206.7,42.1c1.2,2.3,1.6,2.6,3.7,3.2c0.3,0.1,0.3,0.2,0.3,0.5
				s-0.2,0.5-0.4,0.5c-0.1,0-0.3-0.1-0.7-0.1c-0.8-0.2-3.2-0.3-4.6-0.3c-1.6,0-3.7,0.1-4.3,0.3c-0.2,0.1-0.3,0.1-0.5,0.1
				c-0.3,0-0.5-0.3-0.5-0.5c0-0.2,0.1-0.3,0.4-0.3c1.2-0.3,2-1.4,2-2.3c0-0.7-0.7-2.8-1.7-4.9c-0.4-1-0.8-1-3-1h-4.7
				c-1.7,0-2.2,0.3-2.9,2.2c-1,2.2-1.1,2.7-1.1,3.3c0,1.5,1.1,2.4,3.3,2.7c0.5,0.1,0.7,0.2,0.7,0.5c0,0.3-0.3,0.5-0.6,0.5
				c-0.3,0-0.6-0.1-1-0.1c-0.8-0.2-1.5-0.3-2.2-0.3c-0.6,0-1.4,0.1-3.8,0.3l-0.9,0.1c-0.3,0-0.5-0.2-0.5-0.5c0-0.3,0.1-0.4,0.5-0.5
				c1.4-0.5,1.7-1,3.4-4.7l5-11.7c0.4-1,0.7-1.6,0.9-1.9l1.7-3.6c1.5-3.1,1.5-3.1,1.6-3.1c0.3,0,0.8,1,1.5,2.6L206.7,42.1z"/>
			<path class="st0" d="M231.6,35.8c1.5,1.7,2,2.1,2.3,2.1c0.2,0,0.3-0.2,0.4-0.5c0.1-0.3,0.2-6.6,0.2-8.6c0-5.6-0.9-7.1-4.3-7.4
				c-0.5-0.1-0.6-0.2-0.6-0.4c0-0.3,0.2-0.5,0.5-0.5c0.6,0,0.8,0.1,2.2,0.2c0.6,0.1,1.2,0.1,1.6,0.1c0.8,0,2.3-0.1,4.1-0.3
				c0.2-0.1,0.5-0.1,0.6-0.1c0.3,0,0.5,0.2,0.5,0.5c0,0.3-0.2,0.5-0.6,0.6c-1.7,0.3-2.5,2-2.4,5.1l-0.3,11.6
				c-0.1,2.2-0.1,2.2-0.1,2.8c0,1.7,0.1,3.5,0.1,4.2v0.3c0,0.3-0.1,0.5-0.3,0.5s-0.5-0.2-0.7-0.4L218,27c-0.4-0.5-0.5-0.5-0.6-0.5
				c-0.3,0-0.5,0.3-0.5,1.4v7c0.1,8.7,0.4,9.6,4.1,10.1c0.4,0.1,0.6,0.2,0.6,0.5c0,0.3-0.2,0.5-0.5,0.5c-0.1,0-0.5-0.1-0.8-0.1
				c-1-0.2-2.5-0.3-3.4-0.3c-1,0-2.6,0.1-3.4,0.3c-0.3,0.1-0.8,0.1-1,0.1c-0.3,0-0.5-0.2-0.5-0.5c0-0.3,0.1-0.3,0.5-0.5
				c2.4-1,2.5-1.4,2.8-9.5v-2.2v-5.7c0.1-3.6-1.5-5.9-4.2-6c-0.4-0.1-0.6-0.2-0.6-0.5c0-0.3,0.2-0.5,0.6-0.5l1.2,0.1
				c1.5,0,2.8-0.1,3.9-0.2c0.3-0.1,0.8-0.1,1-0.1c0.7,0,0.8,0.1,1.9,1.4c0.2,0.2,0.2,0.2,1.4,1.7c0.8,1,1,1.3,1.2,1.4L231.6,35.8z"
				/>
			<path class="st0" d="M244.4,31.8c0,7.9,3.8,13.3,9.4,13.3c2.4,0,4.7-1.1,6-2.8c1.4-1.9,2.3-5.1,2.3-8.1c0-3.6-1.2-7.2-3.3-9.6
				c-1.6-1.8-4.1-3-6.6-3C247.4,21.5,244.4,25.4,244.4,31.8 M266.4,32.3c0,4.2-1.7,8.4-4.5,11c-2.2,2-5.4,3.2-9,3.2
				c-8,0-13.1-5.1-13.1-13c0-3.8,1.6-7.7,4.1-9.9c2.4-2.2,5.9-3.5,9.7-3.5C261.3,20.1,266.4,25,266.4,32.3"/>
			<path class="st0" d="M273.6,31.8c0,7.9,3.8,13.3,9.4,13.3c2.4,0,4.7-1.1,6-2.8c1.4-1.9,2.3-5.1,2.3-8.1c0-3.6-1.2-7.2-3.3-9.6
				c-1.6-1.8-4.1-3-6.6-3C276.6,21.5,273.6,25.4,273.6,31.8 M295.6,32.3c0,4.2-1.7,8.4-4.5,11c-2.2,2-5.4,3.2-9,3.2
				c-8,0-13.1-5.1-13.1-13c0-3.8,1.6-7.7,4.1-9.9c2.4-2.2,5.9-3.5,9.7-3.5C290.5,20.1,295.6,25,295.6,32.3"/>
			<path class="st0" d="M321,26.1c0,0.9,0.1,1.6,0.2,2.6c0.1,0.1,0.1,0.3,0.1,0.3c0,0.3-0.2,0.5-0.6,0.5c-0.3,0-0.3-0.2-0.5-0.8
				c-1-4.2-4.8-7.4-9.1-7.4c-5,0-8.3,4.3-8.3,11c0,7,3.5,12.6,7.9,12.6c1.6,0,4.3-0.9,5.4-1.7c0.7-0.5,1-1.8,1-4.1
				c0-2.9-1-3.9-3.8-4.1c-0.3,0-0.6-0.2-0.6-0.5c0-0.3,0.2-0.5,0.7-0.5c0.1,0,0.3,0,0.6,0.1c1.5,0.2,2.3,0.2,4.1,0.2
				c1.5,0,2.6-0.1,3.4-0.2c0.6-0.1,1-0.1,1.4-0.1c0.3,0,0.6,0.2,0.6,0.5c0,0.3-0.2,0.5-0.6,0.6c-1.5,0.3-1.9,1.3-1.9,4.4
				c0,0.3,0,0.8,0.1,1c0.1,0.6,0.1,1,0.1,1.4c0,0.7-0.3,1-1.2,1.4c-0.2,0.1-1.4,0.5-2.9,1.3c-3,1.3-5.4,1.9-7.6,1.9
				c-3.2,0-6-1.2-8.1-3.4c-2.2-2.2-3.3-5.2-3.3-9c0-7.9,5.6-14.1,12.7-14.1c2.2,0,4.2,0.5,7.2,1.8c0.8,0.3,1.1,0.5,1.4,0.5
				c0.3,0,0.3-0.1,0.6-0.3c0.2-0.1,0.3-0.2,0.5-0.2c0.4,0,0.6,0.2,0.6,0.6v1.3L321,26.1z"/>
			<path class="st0" d="M335.9,28.6c-0.5-1.3-1-2-1.2-2c-0.2,0-0.2,0-1.2,2.1l-2.2,5c-0.3,0.8-0.3,0.8-0.3,1c0,0.5,0.3,0.6,1.4,0.6
				h5c1,0,1.1-0.1,1.1-0.3c0-0.1,0-0.2-0.2-0.5L335.9,28.6z M346,42.1c1.2,2.3,1.6,2.6,3.7,3.2c0.3,0.1,0.3,0.2,0.3,0.5
				s-0.2,0.5-0.4,0.5c-0.1,0-0.3-0.1-0.7-0.1c-0.8-0.2-3.2-0.3-4.6-0.3c-1.6,0-3.7,0.1-4.3,0.3c-0.2,0.1-0.3,0.1-0.5,0.1
				c-0.3,0-0.5-0.3-0.5-0.5c0-0.2,0.1-0.3,0.4-0.3c1.2-0.3,2-1.4,2-2.3c0-0.7-0.7-2.8-1.7-4.9c-0.4-1-0.8-1-3-1H332
				c-1.7,0-2.2,0.3-2.9,2.2c-1,2.2-1.1,2.7-1.1,3.3c0,1.5,1.1,2.4,3.3,2.7c0.5,0.1,0.7,0.2,0.7,0.5c0,0.3-0.3,0.5-0.6,0.5
				c-0.3,0-0.6-0.1-1-0.1c-0.8-0.2-1.5-0.3-2.2-0.3c-0.6,0-1.4,0.1-3.8,0.3l-0.9,0.1c-0.3,0-0.5-0.2-0.5-0.5c0-0.3,0.1-0.4,0.5-0.5
				c1.4-0.5,1.7-1,3.4-4.7l5-11.7c0.4-1,0.7-1.6,0.9-1.9l1.7-3.6c1.5-3.1,1.5-3.1,1.6-3.1c0.3,0,0.8,1,1.5,2.6L346,42.1z"/>
			<path class="st0" d="M43.6,22.4l4.2-18.7H22.5c-4.8,0-8.4,0.6-11.1,1.9C8,7.3,5.6,10.3,4.8,14.2L0.4,33.9c-0.8,3.4-0.3,6,1.4,8.1
				c2.1,2.8,6,3.9,12.7,3.9h23.9l3.3-14.6H22.1l2.1-9L43.6,22.4L43.6,22.4z"/>
			<path class="st1" d="M19.3,33.5H39l-2.3,10.3H14.4c-6,0-9.4-1-11-3.1c-1.2-1.6-1.5-3.6-1-6.3l4.5-19.7c0.7-3.2,2.6-5.6,5.5-7
				C14.8,6.5,18.1,6,22.6,6h22.6L42,20.2H26.7l1-4h-4.5L19.3,33.5z"/>
			<path class="st2" d="M43.5,7.5L41,18.8H28.8l1-4h-7.5L17.7,35h19.7l-1.7,7.3H14.6c-7.9,0-11.9-1.5-10.5-7.6L8.5,15
				c1.3-5.9,6.4-7.6,14.2-7.6L43.5,7.5L43.5,7.5z"/>
		</g>
       </svg></a>',
            'context' => 'title-area',
        ]
    );
    genesis_markup(
        [
            'close'   => '</div>',
            'context' => 'title-area',
        ]
    );

    if ( has_action( 'genesis_header_right' ) || ( isset( $wp_registered_sidebars['header-right'] ) && is_active_sidebar( 'header-right' ) ) ) {

        genesis_markup(
            [
                'open'    => '<div %s>',
                'context' => 'header-widget-area',
            ]
        );
        do_action( 'genesis_header_right' );
        add_filter( 'wp_nav_menu_args', 'genesis_header_menu_args' );
        add_filter( 'wp_nav_menu', 'genesis_header_menu_wrap' );
        dynamic_sidebar( 'header-right' );
        remove_filter( 'wp_nav_menu_args', 'genesis_header_menu_args' );
        remove_filter( 'wp_nav_menu', 'genesis_header_menu_wrap' );

        genesis_markup(
            [
                'close'   => '</div></div>',
                'context' => 'header-widget-area',
            ]
        );
        

    }

}

//Add the search icon to the header. (Must be selected in the customize child theme under Appearance.)
add_action( 'genesis_meta', 'utc_add_search_icon' );
function utc_add_search_icon() {

    if ( genesis_is_amp() ) {
        return;
    }

    $show_icon = get_theme_mod( 'utc_header_search', utc_customizer_get_default_search_setting() );

    // Exit early if option set to false.
    if ( ! $show_icon ) {
        return;
    }

    add_action( 'genesis_after_header', 'utc_do_header_search_form', 1 );
    add_filter( 'genesis_nav_items', 'utc_add_search_menu_item', 10, 2 );
    add_filter( 'wp_nav_menu_items', 'utc_add_search_menu_item', 10, 2 );

}


//Modify the menu item output of the header menu with the Apply Now ribbon and search toggle.
function utc_add_search_menu_item( $items, $args ) {

    $search_toggle = sprintf( '<li class="menu-item search-icon-menu-item">%s</li><li class="menu-item ribbon-container"><div class="ribbon-wrapper">
    <a href="https://webapp.utc.edu/apply/" title="Apply Now"> 
    <div id="menuribbon" class="ribbon" style="--color: #112e51;">
      <div class="ribbon-content">
        <p id="apply-now-ribbon" class="apply-now-ribbon">Apply</br>Now</p>
      </div>
    </div>
    </a>
  </div></li>', utc_get_header_search_toggle() );

    if ( 'secondary' === $args->theme_location ) {
        $items .= $search_toggle;
    }

    return $items;

}

//Hard code "I am..." and "Quick Links" buttons and append to the main menu. These links should be available on all UTC blogs.
add_filter( 'genesis_nav_items', 'add_static_nav', 10, 2 );
add_filter( 'wp_nav_menu_items', 'add_static_nav', 10, 2 );

function add_static_nav($menu, $args) {
    $args = (array)$args;
    if ( 'primary' !== $args['theme_location']  )
        return $menu;
        $follow = '<li id="menu-item-80" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-80"><a href="#" itemprop="url" class="sf-with-ul"><span itemprop="name">I am…</span></a>
                <ul class="sub-menu level-2">
                    <li id="menu-item-81" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-81"><a href="https://www.utc.edu/about/student-resources" itemprop="url"><span itemprop="name">…a student.</span></a></li>
                    <li id="menu-item-82" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-82"><a href="https://www.utc.edu/about/faculty-and-staff-resources" itemprop="url"><span itemprop="name">…faculty or staff.</span></a></li>
                    <li id="menu-item-83" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-83"><a href="https://www.utc.edu/about/alumni-and-friends" itemprop="url"><span itemprop="name">…an alumn.</span></a></li>
                    <li id="menu-item-84" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-84"><a href="https://www.utc.edu/admissions/parents" itemprop="url"><span itemprop="name">…a parent.</span></a></li>
                    <li id="menu-item-85" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-85"><a href="https://www.utc.edu/veterans/" itemprop="url"><span itemprop="name">…a veteran.</span></a></li>
                </ul>
            </li>
            <li id="menu-item-68" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-68"><a href="#" itemprop="url" class="sf-with-ul"><span itemprop="name">Quick Links</span></a>
                <ul class="sub-menu level-2">
                    <li id="menu-item-69" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-69"><a href="https://mymocs.utc.edu/" itemprop="url"><span itemprop="name">MyMocsNet</span></a></li>
                    <li id="menu-item-70" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-70"><a href="https://webauth.utc.edu/cas/login?service=https%3A%2F%2Futchattanooga.instructure.com%2Flogin%2Fcas" itemprop="url"><span itemprop="name">UTC Learn (Canvas)</span></a></li>
                    <li id="menu-item-71" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-71"><a href="https://mail.google.com/a/mocs.utc.edu" itemprop="url"><span itemprop="name">Mocs Mail+</span></a></li>
                    <li id="menu-item-72" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-72"><a href="https://mocsyncorgs.utc.edu/" itemprop="url"><span itemprop="name">MocsSync</span></a></li>
                    <li id="menu-item-73" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-73"><a href="https://portal.microsoftonline.com/" itemprop="url"><span itemprop="name">O365</span></a></li>
                    <li id="menu-item-74" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-74"><a href="https://sis-reg.utc.edu/StudentRegistrationSsb/ssb/term/termSelection?mode=search" itemprop="url"><span itemprop="name">Class Schedule</span></a></li>
					<li id="menu-item-75" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-75"><a href="https://www.utc.edu/enrollment-management-and-student-affairs/care" itemprop="url"><span itemprop="name">Crisis Resources</span></a></li>
                    <li id="menu-item-76" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-76"><a href="https://www.utc.edu/library" itemprop="url"><span itemprop="name">Library</span></a></li>
                    <li id="menu-item-77" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-77"><a href="https://events.utc.edu/MasterCalendar/MasterCalendar.aspx" itemprop="url"><span itemprop="name">Calendar</span></a></li>
                    <li id="menu-item-78" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-78"><a href="https://people.utc.edu/" itemprop="url"><span itemprop="name">People Finder</span></a></li>
                    <li id="menu-item-79" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-79"><a href="https://www.utc.edu/auxiliary-services/parking/utcmap-large.php" itemprop="url"><span itemprop="name">Campus Map</span></a></li>
                    <li id="menu-item-80" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-80"><a href="https://ds.tennessee.edu/passwords/login.asp?redirect=%2Fpasswords%2Fpassword%2Easp" itemprop="url"><span itemprop="name">Change Password</span></a></li>
                </ul>
            </li>';
    return $menu . $follow;
}

remove_action( 'genesis_entry_header', 'genesis_entry_header_markup_open', 5 );
remove_action( 'genesis_entry_header', 'genesis_entry_header_markup_close', 15 );


//Change "About" text in author box tggitles for single posts. (Inherited from Navigation Pro child theme.)
add_filter( 'genesis_author_box_title', 'utc_author_box_title', 10, 2 );


function utc_author_box_title( $title, $context ) {
    if ( 'archive' === $context ) {
        $title = ' <span itemprop="name">' . get_the_author_meta( 'display_name' ) . '</span>';
    }
    return $title;
}

//Modify comment author `says` text. (Inherited from Navigation Pro child theme.)
add_filter( 'comment_author_says_text', 'utc_comment_author_says_text' );
function utc_comment_author_says_text() {

    return '';

}

//Modify the content limit more link markup for posts. THIS ONLY WORKS FOR "ENTRY CONTENT" Option in theme settings.
add_filter( 'get_the_content_limit', 'utc_content_limit_read_more_markup', 10, 3 );
function utc_content_limit_read_more_markup( $output, $content, $link ) {

    if ( is_page_template( 'page_blog.php' ) || is_home() || is_archive() || is_search() ) {
        $link = sprintf( '<a href="%s" class="more-link button text"><span>%s</span></a>', get_the_permalink(), genesis_a11y_more_link( __( 'Continue Reading', 'utc' ) ) );
    }

    $output = sprintf( '<p>%s &#x02026;</p><p class="more-link-wrap"><span>%s</span></p>', $content, str_replace( '&#x02026;', '', $link ) );

    return $output;

}

//Add elipses when needed for "ENTRY EXCEPTS" option in the theme settings.
function add_elipses_excerpt_more($more) {
	global $post;
	return '&hellip; <p class="more-link-wrap"><span><a class="more-link button text" href="'. get_permalink($post->ID) . '"><span>' . __( 'Continue Reading', 'textdomain' ) . ' </span></a></span></p>';
}
add_filter('excerpt_more', 'add_elipses_excerpt_more');

//Add continue reading button for "ENTRY EXCEPTS" option in the theme settings.
//ADDING THE READ MORE LINK TO ALL OTHER EXCERPTS
add_filter( 'get_the_excerpt', 'excerpt_read_more_all_cases' );

function excerpt_read_more_all_cases( $text ) {

	global $post;
	$raw = $post->post_content;
	$excerpt_length = apply_filters( 'excerpt_length', 55 );
	$raw_to_more = substr( $raw, 0, strpos( $raw, '<!--more-->' ) );
	$excerpt_of_raw = wp_trim_words( $raw, $excerpt_length, ''); 
	$excerpt_of_raw_to_more = wp_trim_words( $raw_to_more, $excerpt_length, ''); 

// CHECKING FOR MANUALLY WRITTEN EXCERPT
	if( has_excerpt() ) { 
	
		$text .= '<p class="more-link-wrap"><span><a class="more-link button text" href="'. get_permalink($post->ID) . '"><span>' . __( 'Continue Reading ', 'textdomain' ) . '</a></span></p>';
		
// CHECKING FOR EXCERPT BEING SHORT BY THE 'MORE TAG'
	} elseif( strpos( $raw, '<!--more-->' ) && strlen( $excerpt_of_raw_to_more ) < strlen( $excerpt_of_raw ) ) {
	
		$text .= '<p class="more-link-wrap"><span><a class="more-link button text" href="'. get_permalink($post->ID) . '">' . __( 'Continue Reading ', 'textdomain' ) . '</a></span></p>';
		
// CHECKING FOR EXCERPT BEING SHORT BECAUSE OIF SHORT CONTENT
	} elseif( strlen( $text ) == strlen( $excerpt_of_raw ) ) {
	
		$text .= '<p class="more-link-wrap"><span><a class="more-link button text" href="'. get_permalink($post->ID) . '">' . __( 'Continue Reading ', 'textdomain' ) . '</a></span></p>';
		
	}
	
	return $text;
}

//Add a paragraph tag around the WordPress more link markup. (Inherited from Navigation Pro child theme.)
add_filter( 'the_content_more_link', 'utc_wrap_more_link' );
function utc_wrap_more_link( $more ) {

    return '<p class="more-link-wrap">' . $more . '</p>';

}

//Filter the output of the post date to add a wrapper like other shortcodes. (Inherited from Navigation Pro child theme.)
add_filter( 'genesis_post_date_shortcode', 'utc_custom_date_shortcode', 10, 2 );
function utc_custom_date_shortcode( $output, $atts ) {

    if ( 'relative' === $atts['format'] ) {
        $display  = genesis_human_time_diff( get_the_time( 'U' ), current_time( 'timestamp' ), $atts['relative_depth'] ); // phpcs:ignore WordPress.DateTime.CurrentTimeTimestamp.Requested
        $display .= ' ' . __( 'ago', 'utc' );
    } else {
        $display = get_the_time( $atts['format'] );
    }

    $output = sprintf( '<span class="entry-date"><time %s>', genesis_attr( 'entry-time' ) ) . $atts['before'] . $atts['label'] . '<span class="entry-time-date">' . $display . '</span>' . $atts['after'] . '</time></span>';

    return $output;

}

//Hook in before footer the UTC Dept. info and menu/map widget area.
add_action( 'genesis_before_footer', 'utc_dept_info', 1 );
function utc_dept_info() {
	
    genesis_widget_area(
        'footer-dept-info',
        [
            'before' => '<div id="department-info" class="department-info">',
            'after'  => '</div>',
        ]
    );
}

// Add static footer map and menus.
add_action( 'genesis_footer', 'utc_custom_footer_map', 2 );
function utc_custom_footer_map() {

    echo '';

}


//Override the footer copyright area to ensure consistency.
remove_action( 'genesis_footer', 'genesis_do_footer' );

//Customize the footer copyright area to show across all blogs.
add_action( 'genesis_footer', 'utc_custom_footer_content', 7 );
function utc_custom_footer_content() {

	$current_url = home_url( add_query_arg( [], $GLOBALS['wp']->request ) );
    echo '<!--Footer menu/map begins-->
		<div id="footer-menu-map" class="before-footer-menu-map"><div class="wrap"><h2 class="screen-reader-text">Explore more</h2>
	<section id="footer-menus" class="widget_text widget widget_custom_html"><div class="widget_text widget-wrap"><div class="textwidget custom-html-widget"><div id="left-footer-menu" class="footer-menu">
				<nav role="navigation" aria-labelledby="" class="left-footer-menu text-right">
					<ul class="menu">
						<li class="menu-item"> <a href="/about/student-resources" data-drupal-link-system-path="node/38451">Students</a> </li>
						<li class="menu-item"> <a href="/about/faculty-and-staff-resources" data-drupal-link-system-path="node/38411">Faculty and Staff</a> </li>
						<li class="menu-item"> <a href="/about/alumni-and-friends" data-drupal-link-system-path="node/38376">Alumni and Friends</a> </li>
						<li class="menu-item"> <a href="/enrollment-management-and-student-affairs/admissions/parents" data-drupal-link-system-path="node/36067">Parents</a> </li>
						<li class="menu-item"> <a href="/finance-and-administration/auxiliary-services/parking-services" data-drupal-link-system-path="node/1296">Parking</a> </li>
						<li class="menu-item"> <a href="/about/emergency-preparedness" data-drupal-link-system-path="node/38406">Emergency Preparedness</a> </li>
						<li class="menu-item"> <a href="/enrollment-management-and-student-affairs/admissions/visit" data-drupal-link-system-path="node/36137">Visit</a> </li>
					</ul>
				</nav>
			</div>
			<div id="center-footer-menu">
				&nbsp;
			</div>
			<div id="right-footer-menu" class="footer-menu">
				<nav role="navigation" aria-labelledby="" id="" class="right-footer-menu">
					<ul class="menu">
						<li class="menu-item"> <a href="https://mymocs.utc.edu/">MyMocsNet</a> </li>
						<li class="menu-item"> <a href="https://office.com/">O365</a> </li>
						<li class="menu-item"> <a href="https://www.utc.edu/information-technology/passwords">Change Password</a> </li>
						<li class="menu-item"> <a href="https://people.utc.edu/eGuide/servlet/eGuide">People Directory</a> </li>
						<li class="menu-item"> <a href="https://events.utc.edu/MasterCalendar/MasterCalendar.aspx">Calendars</a> </li>
						<li class="menu-item"> <a href="https://www.utc.edu/finance-and-administration/human-resources/work"> Work at UTC</a> </li>
						<li class="menu-item">'.((is_user_logged_in()) ? '<a href="' . esc_url( wp_logout_url() ) . '">' . __( 'CAS Log out', 'genesis' ) . '</a>' : $link = '<a href="' . esc_url( wp_login_url() ) . '">' . __( 'CAS Log In', 'genesis' ) . '</a>').' </li>
					</ul>
				</nav>
			</div></div></div></section>
				<section id="footer-map" class="widget_text widget widget_custom_html"><div class="widget_text widget-wrap"><div class="textwidget custom-html-widget"><div id="left-footer-map">
					&nbsp;
				</div>
				<div id="global-footer-map"><div class="inner-map-wrap">
					<a href="https://explore.utc.edu/?id=1826#!ct/" class="campus-map"><img alt="UTC campus maps" height="405" src="https://marvel-b1-cdn.bc0a.com/f00000000184993/www.utc.edu/sites/default/files/2020-08/utc-footer-map-explore.png" width="361" be_marvel="1" onerror="this.onerror=null;this.src=https://marvel-b1-cdn.bc0a.com/f00000000184993/www.utc.edu/sites/default/files/2020-08/utc-footer-map-explore.png"></a></div>
				<ul class="utc-footer-socials">
				<li class="inline horizontal px-2">
				<a class="text-white hover:text-utc-links-hoverFooterIcons" href="https://www.utc.edu" target="_self" aria-label="Back to our departmental homepage" title="Back to our departmental homepage" rel="noopener">
				<span class="text-white hover:text-utc-links-hoverFooterIcon fa fa-home fa-sm"></span>
				</a>
				</li>
				<li class="inline horizontal px-2">
				<a class="text-white hover:text-utc-links-hoverFooterIcons" href="https://blog.utc.edu/news/" target="_self" aria-label="Follow our Blog/News" title="Follow our Blog/News" rel="noopener">
				<span class="text-white hover:text-utc-links-hoverFooterIcon fa fa-blog fa-sm"></span>
				</a>
				</li>
				<li class="inline horizontal px-2">
				<a class="text-white hover:text-utc-links-hoverFooterIcons" href="https://www.linkedin.com/school/27384/" target="_self" aria-label="Find us on LinkedIn" title="Find us on LinkedIn" rel="noopener">
				<span class="text-white hover:text-utc-links-hoverFooterIcon fa fa-linkedin fa-sm"></span>
				</a>
				</li>
				<li class="inline horizontal px-2">
				<a class="text-white hover:text-utc-links-hoverFooterIcons" href="https://www.youtube.com/UTChattanooga" target="_self" aria-label="Find us on Youtube" title="Find us on Youtube" rel="noopener">
				<span class="text-white hover:text-utc-links-hoverFooterIcon fa fa-youtube fa-sm"></span>
				</a>
				</li>
				<li class="inline horizontal px-2">
				<a class="text-white hover:text-utc-links-hoverFooterIcons" href="https://www.twitter.com/UTChattanooga" target="_self" aria-label="Find us on Twitter" title="Find us on Twitter" rel="noopener">
				<span class="text-white hover:text-utc-links-hoverFooterIcon fa fa-twitter fa-sm"></span>
				</a>
				</li>
				<li class="inline horizontal px-2">
				<a class="text-utc-blue-500 hover:text-utc-links-hoverFooterIcons" href="https://www.instagram.com/utchattanooga" target="_self" aria-label="Find us on Instagram" title="Find us on Instagram" rel="noopener">
				<span class="text-white hover:text-utc-links-hoverFooterIcon fa fa-instagram fa-sm"></span>
				</a>
				</li>
				<li class="inline horizontal px-2">
				<a class="text-white hover:text-utc-links-hoverFooterIcons" href="https://www.facebook.com/UTChattanooga" target="_self" aria-label="Find us on Facebook" title="Find us on Facebook" rel="noopener">
				<span class="text-white hover:text-utc-links-hoverFooterIcon fa fa-facebook fa-sm"></span>
				</a>
				</li>
				</ul>
				</div>
				<div id="right-footer-map">
					&nbsp;
				</div></div></div></section>
				</div></div>
				<!--Copyright footer begins-->
				<div class="footer-copyright-container"><div class="footer-copyright"><h2 class="screen-reader-text">UTC Copyright, Compliance and Policy Info</h2></div><div class="copyright"><p></p><div class="block"><a href="https://www.utc.edu/about/contact/" id="legal-questions">Questions?</a> ©&nbsp;2022 University of Tennessee at Chattanooga. All rights reserved.<br>615&nbsp;McCallie&nbsp;Avenue&nbsp;&nbsp; | &nbsp;&nbsp;Chattanooga,&nbsp;TN&nbsp;37403&nbsp;&nbsp; | &nbsp;&nbsp;(423)&nbsp;425‑4111</div>
	<div class="block"><a href="https://www.utc.edu/sexual-misconduct/index.php#title-ix-statement" id="legal-title-ix">Title IX Statement</a>&nbsp;&nbsp; | &nbsp;&nbsp;<a href="https://www.utc.edu/about/privacy.php" id="legal-privacy">Privacy Statement</a>&nbsp;&nbsp; | &nbsp;&nbsp;<a href="https://www.utc.edu/academic-affairs/accessible-information-materials-technology-program/">Accessibility</a>&nbsp;&nbsp; | &nbsp;&nbsp;<a href="https://www.utc.edu/webhelp">Web Requests</a></div>
	<div class="block">A comprehensive, community-engaged campus of the <a href="http://www.tennessee.edu/" id="legal-ut">University of Tennessee System</a> and partner in the <a href="https://www.tntransferpathway.org">Tennessee Transfer Pathway</a>.</div><p></p></div></div>';

}

add_action( 'after_setup_theme', 'utc_register_sidebars' );
/**
 * Registers widget areas.
 */
function utc_register_sidebars() {

    // Registers widget areas.
    genesis_register_sidebar(
        [
            'id'          => 'footer-dept-info',
            'name'        => __( 'Above the Footer: Department Information', 'utc' ),
            'description' => __( 'Add your department name, address, and other information to this footer area.', 'utc' ),
        ]
    );

}

//Allow SVG option for image uploads
function add_file_types_to_uploads($file_types){
  $new_filetypes = array();
  $new_filetypes['svg'] = 'image/svg+xml';
  $file_types = array_merge($file_types, $new_filetypes );
  return $file_types;
}
add_filter('upload_mimes', 'add_file_types_to_uploads');


//Add the category of a post as a class to the body tag.
add_filter( 'body_class', 'utc_body_class_add_categories' );
function utc_body_class_add_categories( $classes ) {
    if ( !is_single() )
        return $classes;
    $post_categories = get_the_category();
    foreach( $post_categories as $current_category ) {
    $classes[] = 'category-' . $current_category->slug;
    }
    return $classes;
}

//If the first paragraph is selected in the child-theme-settings apply body class. *NOTE* True is the default of onboarding.
add_filter( 'body_class', 'first_paragraph_body_class' );
function first_paragraph_body_class( $classes ) {
	$firstparagraph = genesis_get_option( 'utc_intro_paragraph_styling' );
	if ( is_page() || is_singular() && $firstparagraph==true ) {
        $classes[] = 'first-paragraph-true';
    }
    return $classes;
}

function custom_body_classes( $classes ) {
    if ( is_page() ) {
        $classes[] = 'content-type-page';
    } else if ( is_page_template( 'page_blog.php' ) ) {
        $classes[] = 'content-type-post';
    } else if ( is_home() ){
        $classes[] = 'frontpage';
    } else if ( is_archive()) {
        $classes[] = 'content-type-archive';
    } else if ( is_search() ) {
        $classes[] = 'content-type-search';
    }
    return $classes;
}
add_filter( 'body_class', 'custom_body_classes' );

    
// Wrap entry titles on 'single' pages in h1 tags
add_filter( 'genesis_entry_title_wrap', 'sk_set_custom_entry_title_wrap' );
function sk_set_custom_entry_title_wrap( $wrap ) {
    if ( is_singular() ) {
        $wrap = is_singular() ? 'h1' : 'h2';
    }
    return $wrap;
}

//* Add description to menu items
add_filter( 'widget_nav_menu', 'be_add_description', 10, 2 );
function be_add_description( $item_output, $item ) {
    $description = $item->post_content;
    if (' ' !== $description ) 
    return preg_replace( '/(<a.*?>[^<]*?)</', '$1' . '<span class="menu-description">' . $description . '</span><', $item_output);
    else
    return $item_output;
}

// Add go to the top button 
add_action( 'genesis_before', 'genesis_to_top');
    function genesis_to_top() {
     echo '<a href="#0" class="to-top" title="Back To Top"><i class="fa fa-angle-up fa-5x"></i></a>';
}

//Wrap articles in archives in a div
add_action ('genesis_before_content', 'articles_archive_wrapper');
function articles_archive_wrapper() {
    if (is_category() || is_tag() || is_archive() || is_search() || is_home() ){
        add_action ('genesis_before_loop', 'articles_open_wrapper');
        add_action ('genesis_after_loop', 'articles_close_wrapper');
    }
}
function articles_open_wrapper() {
    echo '<div class="articles-wrapper">';
}
function articles_close_wrapper() {
    echo '</div>';
}
remove_action( 'genesis_after_endwhile', 'genesis_posts_nav' );
add_action( 'genesis_after_content', 'genesis_posts_nav' );

//Remove the feature image in search results.
if ( is_search() ){
    remove_action( 'genesis_entry_content', 'genesis_do_post_image', 8 );
}

// Reposition the breadcrumbs.
remove_action( 'genesis_before_loop', 'genesis_do_breadcrumbs' );
add_action( 'genesis_before_content_sidebar_wrap', 'genesis_do_breadcrumbs' );

//Modify the breadcrumbs with a separator.
add_filter( 'genesis_breadcrumb_args', 'utc_breadcrumb_args' );
function utc_breadcrumb_args( $args ) {

    $args['labels']['prefix'] = '';
    $args['sep']              = '<span class="separator" aria-label="breadcrumb separator">/</span>';

    return $args;

}

add_filter('wp_nav_menu_objects' , 'my_menu_class');
function my_menu_class($menu) {
    $level = 0;
    $stack = array('0');
    foreach($menu as $key => $item) {
        while($item->menu_item_parent != array_pop($stack)) {
            $level--;
        }   
        $level++;
        $stack[] = $item->menu_item_parent;
        $stack[] = $item->ID;
        $menu[$key]->classes[] = 'level-'. ($level - 1);
    }                    
    return $menu;        
}

